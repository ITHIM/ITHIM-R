<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Creates three scenarios where in each one, the mode share of a given mode is elevated by a set
percentage of the total trips. The scenario modes are cycle, car, and bus."><title>Create scenarios for Bogota — create_bogota_scenarios • ithimr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create scenarios for Bogota — create_bogota_scenarios"><meta property="og:description" content="Creates three scenarios where in each one, the mode share of a given mode is elevated by a set
percentage of the total trips. The scenario modes are cycle, car, and bus."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ithimr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/how-to-run-ITHIM.html">How to run ITHIM</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ITHIM/ITHIM-R/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create scenarios for Bogota</h1>
      <small class="dont-index">Source: <a href="https://github.com/ITHIM/ITHIM-R/blob/HEAD/R/create_bogota_scenarios.R" class="external-link"><code>R/create_bogota_scenarios.R</code></a></small>
      <div class="d-none name"><code>create_bogota_scenarios.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates three scenarios where in each one, the mode share of a given mode is elevated by a set
percentage of the total trips. The scenario modes are cycle, car, and bus.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_bogota_scenarios</span><span class="op">(</span><span class="va">trip_set</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>trip_set</dt>
<dd><p>data frame, baseline scenario trips</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>list of baseline scenario and three scenarios</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function creates three scenarios increasing the mode shares of cycling, car
and bus by the same pre-defined percentage of the total mode shares.
We assume that:</p>
<ul><li><p>the total number of trips remains the same but trips from other modes
  (apart from truck, bus driver, car driver and commercial motorcycle trips
  which remain unchanged - at least initially) are converted to the mode in
  question; truck and commercial motorcycle trips remain constant across all
  scenarios whilst bus driver and car driver trips are updated based on the new
  total distance of car and bus trips once the increase in mode share has been
  conducted for each scenario</p></li>
<li><p>the percentage share across the three distance bands of the mode that
  is increased is preserved, i.e. if 10<!-- % of all cycling trips are in distance -->
  band 0-2km then after increasing the cycling mode share by x<!-- % of all trips -->
  we still have 10<!-- % of all cycling trips in this distance band --></p></li>
<li><p>For each scenario we always convert the same <!-- % of total trips to the mode -->
  in question, independently of the original overall mode share of that mode.
  I.e. if e.g. 1<!-- % of all trips are cycle trips and 50% car trips and we apply a -->
  5<!-- % increase, then in the cycle scenario 6% of all trips are cycling trips and -->
  in the car scenario 55<!-- % of all trips are car trips. We always add a 5% increase -->
  of the total trips.</p></li>
<li><p>we preserve the proportion of trips in each distance band. E.g. if 20<!-- % of -->
  all trips are in distance band 0-2km, then in each scenario 20<!-- % of all -->
  trips are still in distance band 0-2km.</p></li>
</ul><p>Example:</p>
<p>Assume that there are only two distance bands A and B and that 80<!-- % of all -->
cycling trips lie in distance band A and the remaining 20<!-- % in distance -->
band B.
Assume that 60<!-- % of all trips are in distance band A and 40% in distance -->
band B.
Assume we want to increase the cycling mode share by 5<!-- % of all trips. --></p>
<p>Then, we need to convert 5<!-- % x 80% / 60% = 6.67% of non-cycling trips in distance band A -->
to cycling trips and 5<!-- % x 20% / 40% = 2.5% of non-cycling trips in distance band B -->
to cycling trips.</p>
<p>Overall, this leads to an increase of
(5<!-- % x 80% / 60%) x 60% + (5% x 20% / 40%) * 40% = 5% -->
of cycling trips, whilst preserving the cycling mode shares of 80<!-- % in distance -->
band A and 20<!-- % in distance band B and preserving the total mode shares of 60% in -->
distance band A and 40<!-- % in distance band B. The total number of trips is also -->
preserved.</p>

<p>The function performs the following steps:</p>
<ul><li><p>the overall mode shares for each of the cycle, car and bus modes across the three
  distance categories is extracted from the trip data set</p></li>
<li><p>from the trip data extract the trip information, calculate the total number of trips
  and find the proportion of trips in each distance category</p></li>
<li><p>find the proportion of trips to be converted for each mode, scenario and distance category</p></li>
<li><p>define the modes that are not changeable (at least initially) between the scenarios and
  divide the trip data into a set with the modes that can be changed and another set with the
  trips whose modes cannot be changed</p></li>
<li><p>split the changeable trips and also all trips by distance band</p></li>
<li><p>to create the scenarios loop through the scenarios:</p><ul><li><p>loop through each distance band:</p><ul><li><p>find the changeable trips that are not of the mode to be increased</p></li>
<li><p>count the number of trips made by the mode to be increased</p></li>
<li><p>for the bus scenario we aim to increase all public transport trips,
          i.e. we find the changeable trips not made by bus or rail and we count
          the number of trips made by bus or rail</p></li>
<li><p>find the number of total trips that we would like to convert</p></li>
<li><p>if the number of trips that are changeable equals the number of trips to be
          converted, all changeable trips are converted to the mode in question</p></li>
<li><p>if there are more trips that are changeable than we want to change,
          sample the number of trips to change from the changeable trip ids</p></li>
<li><p>if there are more trips to be converted than there are changeable trips, then
          convert as many trips as possible and create a warning message</p></li>
<li><p>convert the required trips to the new mode in question</p></li>
</ul></li>
<li><p>add all trips across the distance bands and add the non-changeable trips</p></li>
<li><p>update the bus_driver and car_driver trips</p></li>
</ul></li>
<li><p>create a list containing the trips for each scenario as elements</p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Ali Abbas, Anna Schroeder, Daniel Gil, Lambed Tatah, Rob Johnson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

