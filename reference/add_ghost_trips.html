<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Add trips that do not get assigned any physical activity component,
can be used as proxy for vehicle distances."><title>Addition of ghost trips — add_ghost_trips • ithimr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Addition of ghost trips — add_ghost_trips"><meta property="og:description" content="Add trips that do not get assigned any physical activity component,
can be used as proxy for vehicle distances."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ithimr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/how-to-run-ITHIM.html">How to run ITHIM</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ITHIM/ITHIM-R/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Addition of ghost trips</h1>
      <small class="dont-index">Source: <a href="https://github.com/ITHIM/ITHIM-R/blob/HEAD/R/add_ghost_trips.R" class="external-link"><code>R/add_ghost_trips.R</code></a></small>
      <div class="d-none name"><code>add_ghost_trips.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Add trips that do not get assigned any physical activity component,
can be used as proxy for vehicle distances.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_ghost_trips</span><span class="op">(</span></span>
<span>  <span class="va">raw_trip_set</span>,</span>
<span>  trip_mode <span class="op">=</span> <span class="st">"bus_driver"</span>,</span>
<span>  distance_ratio <span class="op">=</span> <span class="va">BUS_TO_PASSENGER_RATIO</span> <span class="op">*</span> <span class="va">DISTANCE_SCALAR_PT</span>,</span>
<span>  reference_mode <span class="op">=</span> <span class="st">"bus"</span>,</span>
<span>  prop_male <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  agerange_male <span class="op">=</span> <span class="st">"18, 65"</span>,</span>
<span>  agerange_female <span class="op">=</span> <span class="st">"18, 65"</span>,</span>
<span>  scenario <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>raw_trip_set</dt>
<dd><p>data frame of trips</p></dd>


<dt>trip_mode</dt>
<dd><p>which mode to add</p></dd>


<dt>distance_ratio</dt>
<dd><p>fraction of reference distance to use to calculate new mode distance</p></dd>


<dt>reference_mode</dt>
<dd><p>name of reference mode</p></dd>


<dt>prop_male</dt>
<dd><p>proportion of newly added mode that are assigned to males</p></dd>


<dt>agerange_male</dt>
<dd><p>age range of males associated with newly added mode</p></dd>


<dt>agerange_female</dt>
<dd><p>age range of female drivers associated with newly added mode</p></dd>


<dt>scenario</dt>
<dd><p>name of scenario for which mode is to be added</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>data frame of trips</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function creates trips based on distance relative to another (reference) mode,
without altering the synthetic population. I.e. it adds trips that do not get assigned any physical
activity component. This function can be used to add e.g. car_driver and bus_driver trips
which are used as proxy for vehicle distances needed for the injury and the CO2 pathways.
It can also used to add truck and commercial motorcycle trips that are not included in any travel surveys.
As needed for the injury pathway, these newly added trips are assigned as trips made by a males or
females based on the proportion of males given as input parameter. The age ranges of males and females
taking those newly added trips can also be defined.</p>
<p>The new mode distance is equally split by the number of people times the number of trips per people to
be added. This is used as the distance for new male trips. As the proportion of female trips tends to be
very low, the distance calculated for male trips is split by 10 and using a 10th of the distance
for male trips, 10 times as many female trips are added compared with the very low number of female
trips that would have been added had the same distance been used as for male trips.
E.g. if the number of people to be added is 100 with 1 trip per person and 98<!-- % of -->
those trips are made by males, then we add 98 male trips but 10 * 2 = 20 female trips
with a 10th of the distance of male trips. This is to ensure a better representation of
the demographics of female trips whilst keeping the number of newly added trips as
small as possible to reduce the run time of the model.</p>
<p>The function performs the following steps:</p>
<ul><li><p>set up the number of people (with regards to males) and trips per per person to be added</p></li>
<li><p>find the total distance of the reference mode</p></li>
<li><p>find the age ranges for male and female trips</p></li>
<li><p>find the number of male and female participants</p></li>
<li><p>calculate the total distance of the new mode to be added based on the reference distance and
  find the speed of the new mode</p></li>
<li><p>for male trips:</p><ul><li><p>define the distance range for each male trip to be added, assume that each trip is of equal length</p></li>
<li><p>add new male trips sampling from the given age range (add_trips.R)</p></li>
<li><p>add age and distance categories plus scenario name</p></li>
</ul></li>
<li><p>repeat for female trips (assuming female trips are a 10th of the distance
  of male trips and adding proportionally 10 times as many female trips)</p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Ali Abbas, Anna Schroeder, Daniel Gil, Lambed Tatah, Rob Johnson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

