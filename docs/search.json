[{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Rob Johnson. Author, maintainer. Ali Abbas. Author.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Johnson R, Abbas (2023). ithimr: Integrated Transport Health Impact Model. R package version 0.1.2, https://github.com/ITHIM/ITHIM-R, https://ithim.github.io/ITHIM-R/.","code":"@Manual{,   title = {ithimr: Integrated Transport and Health Impact Model},   author = {Rob Johnson and Ali Abbas},   year = {2023},   note = {R package version 0.1.2, https://github.com/ITHIM/ITHIM-R},   url = {https://ithim.github.io/ITHIM-R/}, }"},{"path":"/How_To_Run_ITHIM.html","id":null,"dir":"","previous_headings":"","what":"How to run ITHIM-Global","title":"How to run ITHIM-Global","text":"guide explain install ITHIM-R package, run model ITHIM-Global using package produce summaries key results. Please note guide written Windows 10 work similarly different operating systems.","code":""},{"path":[]},{"path":"/How_To_Run_ITHIM.html","id":"pre-requisites","dir":"","previous_headings":"How to install the ITHIM-R package","what":"Pre-requisites","title":"How to run ITHIM-Global","text":"following programmes need installed ITHIM-R package can used: Git R R Studio","code":""},{"path":"/How_To_Run_ITHIM.html","id":"cloning-the-github-repository","dir":"","previous_headings":"How to install the ITHIM-R package","what":"Cloning the Github repository","title":"How to run ITHIM-Global","text":"clone (.e. download) ITHIM-R Github repository, open command window, navigate folder want install repository type: ‘git clone https://github.com/ITHIM/ITHIM-R.git’  change Bogota branch guide written, navigate ITHIM-R folder within command window, type: ‘git checkout bogota’  Github repository now downloaded computer working branch set Bogota branch branch documentation refers .","code":""},{"path":"/How_To_Run_ITHIM.html","id":"installing-the-package-in-rstudio","dir":"","previous_headings":"How to install the ITHIM-R package","what":"Installing the package in RStudio","title":"How to run ITHIM-Global","text":"open ITHIM-R package RStudio double click ITHIM-R.Rproj file inside ITHIM-R folder saved computer. open package RStudio. install ITHIM-R package RStudio, following steps need performed: 1.) Git installed ‘Build’ tab top right hand corner RStudio. Click tab ‘Install’ panel .  install ITHIM-R package also likely initially throw error message ‘Exited status 1’ stating R packages needed ITHIM-R package yet installed. install missing packages, click ‘Packages’ tab right hand side middle pane ‘Install’. open pop-window lets type packages still need installing. Click ‘Install’.  missing R packages installed, go back ‘Build’ tab install ITHIM-R package . now install smoothly. get newest updates Bogota branch, go ‘Git’ tab RStudio next ‘Build’ tab click ‘Pull’. automatically download newest changes Github. update ITHIM-R package computer, need go ‘Build’ tab click ‘Install’ . (Alternatively, code none input files changed, instead clicking ‘Install’, can also click ‘’ ‘Load ’ option exists , .e. ‘devtools’ installed. faster way update package work minor code changes.) recommended pull install newest updates regular basis.  Finally, also install ‘drpa’ package Github (drpa) first installing ‘remotes’ package explained typing remotes::install_github(“meta-analyses/drpa”) RStudio console.","code":""},{"path":"/How_To_Run_ITHIM.html","id":"running-ithim-global","dir":"","previous_headings":"","what":"Running ITHIM-Global","title":"How to run ITHIM-Global","text":"run ITHIM-Global using ITHIM-R package various input files parameters need updated first. multi_city_script.R can used call core functions required run ITHIM-R. Note multi_city_script.R set run ITHIM-Global various cities one go required looping cities one one.","code":""},{"path":"/How_To_Run_ITHIM.html","id":"update-input-parameters","dir":"","previous_headings":"Running ITHIM-Global","what":"Update input parameters","title":"How to run ITHIM-Global","text":"several input parameter files need updating running ITIHM-Global: 5 files specific city saved directory city’s name. (See inst/ext/local/bogota example files also information). files need saved inst/extdata/local/‘city’ folder, ‘city’ replaced appropriate city name. file containing various input parameters cities code run saved ITHIM-R folder. branch, file called Bogota_InputParameters_vxx.xlsx, vxx refers latest version number file. contains input parameters Bogota can easily extended contain input parameter values various cities. global datasets - dose-response relationships air pollution pathway e.g.. files can found inst/extdata/global folder usually need changed. (See information.)","code":""},{"path":"/How_To_Run_ITHIM.html","id":"city-specific-files","dir":"","previous_headings":"Running ITHIM-Global > Update input parameters","what":"City specific files","title":"How to run ITHIM-Global","text":"section covers 5 city specific input files required run model. Travel survey (example trips dataset). table trips taken group people given day. also includes people take trips. data come official travel survey city possible. One row per trip (stage trip) Minimal columns: participant_id, age, sex, trip_mode, trip_duration (trip_distance) columns: stage_mode, stage_duration (stage_distance) Injury events (example injuries dataset). table recorded road-traffic injury (fatality) events city one years. One row per event Minimal columns: victim mode (cas_mode) strike mode (strike_mode) columns: year, cas_age, cas_gender, weight (weight column give number years data exists year information given) Disease burden data (example burden dataset). gives burden disease different diseases. city specific information exists, country level information can used. One row per disease/metric/age/gender combination Minimal rows: Measure (death/YLL); sex_name (Male/Female); age_name (‘x y’); cause_name (disease names); val (value burden); population (number people val corresponds , e.g. population country) Population city (example population dataset). information used scale Burden Disease data city’s population question. One row per demographic group Columns: sex, age, population age column share boundaries age_name Disease burden data, can aggregated Physical activity survey (example physical activity dataset). used represent physical activity levels city taken official physical activity survey city possible. One row per person Columns: sex, age, ltpa_marg_met (total non-occupational PA week)","code":""},{"path":"/How_To_Run_ITHIM.html","id":"global-file-inputs","dir":"","previous_headings":"Running ITHIM-Global > Update input parameters","what":"Global file inputs","title":"How to run ITHIM-Global","text":"order setup model, need fixed list tables/datasets, : Disease interaction table. table list diseases/causes specific pathway Air Pollution Physical Activity also interaction . Air Pollution Exposure Response Functions (ERFs). give exposure response relationships air pollution (PM2.5) impact health different diseases/causes. collected/cleaned datasets published studies . Physical Activity Dose-Response Functions (DRFs). dose response relationships physical activity impact health different diseases/causes. Similar air pollution, comes published studies. now sits independent R package called drpa. Ventilation rate tables. data can found inst/extdata/global/ventilation_rate details much air inhaled different people model population.","code":""},{"path":"/How_To_Run_ITHIM.html","id":"call-multi_city_scriptr","dir":"","previous_headings":"Running ITHIM-Global","what":"Call multi_city_script.R","title":"How to run ITHIM-Global","text":"order run ITHIM-R installed various input files described updated, open multi_city_script.R file within RStudio. (file can found ‘Files’ tab middle pane right hand side). key script run ITIHM-Global constant mode (.e. without sampling input parameters distributions). reads required datasets initialises variables calling run_ithim_setup runs model calling run_ithim. First update parameter values beginning script set-e.g. city / cities script run. several city names given vector, model performs ITHIM-R analysis one city another. parameter values updated, click ‘Source’ model run.  produces pop-windows showing plots results giving years life lost scenario required disease outcome.","code":""},{"path":"/How_To_Run_ITHIM.html","id":"results","dir":"","previous_headings":"","what":"Results","title":"How to run ITHIM-Global","text":"Apart pop-windows produced end multi_city_script.R give years life lost scenario disease outcome, main file containing model outputs ithim_objects list, saved results/multi_city/io_,‘output_version’,.rds, output_version currently set SHA number (.e. unique identifier) latest update Github can also updated manually user.  health effects ITHIM presented years life lost (YLLs) number attributable deaths. background burden data study areas estimated Global Burden Disease studies.","code":""},{"path":"/How_To_Run_ITHIM.html","id":"ithim_objects","dir":"","previous_headings":"Results","what":"ithim_objects","title":"How to run ITHIM-Global","text":"ithim_objects list saved results/multi_city/io_“,output_version,”.rds, output_version currently set SHA number (.e. unique identifier) latest update Github can also updated manually user multi_city_script.R. list contains comprehensive set intermediate final results model run: city contains following data: trip_scen_sets: trip data scenarios synthetic population, .e. population sample built combining physical activity survey travel survey data. dist: total stage mode distances mode scenario (incl. baseline) synthetic population. dur: total stage mode durations mode scenario (incl. baseline) synthetic population. true_dist: distances trip data scaled total distance travelled population city (age ranges considered model ) scenario (incl. baseline) mode transport. inj_distances: true_distances: city population mode distances age category sex considered model. injuries_list: scenarios (incl. baseline) two lists given, one ‘whw’ (-hit-) accidents strike casualty mode known one ‘nov’ (vehicle) accidents strike vehicle involved accident. lists contain casualty (strike) mode combinations age category sex. Furthermore, detail casualty (strike) mode distances travelled entire city population considered model (’_sum’) just respective age sex category. also detail casualty (strike) mode exponents used injury Poisson model. reg_model: parameterised Poisson injury regression model. injuries_for_model: baseline data containing fatality counts casualty strike mode combinations associated city population distance data. demographic: city population counts age category sex combinations considered model. synth_pop: population extracted physical activity survey giving marginal met leisure physical activity values person. outcomes: mmets: Marginal MET values person synthetic population scenario. pm_conc_pp: PM2.5 concentration attributed person synthetic population scenario (incl. baseline). co2_conc: total CO2 concentration levels mode transport scenario (incl. baseline). ref_injuries: number injury deaths years life lost age sex category reference scenario including upper lower boundaries. hb: health burden (deaths years life lost (YLLs) two separate dataframes) age sex category disease using combined result diseases affected air pollution physical activity levels. pathway_hb: health burden (deaths years life lost (YLLs) two separate dataframes) age sex category disease keeping results diseases affected air pollution physical activity levels separate. whw: number fatalities strike casualty modes -hit---vehicle injuries scenarios (incl. baseline). disease_burden: disease burden diseases baseline scenario (deaths years life lost) age sex categories considered model (input data). PM_emission_inventory: PM emission inventory mode transport baseline scenario (input data). injury_table: summarised total injury counts injury input data age sex category strike casualty mode years (‘weight’ column) given input data ‘whw’ (-hit-) ‘nov’ (--vehicle) accidents. vehicle_inventory: gives speed CO2 PM2.5 emissions inventories vehicles baseline scenario. location: country continent information. new_walk_trips_count: number rail bus trips additional walking stage added model run. Scen_prop: proportion trips mode converted distance category scenario. Ithim_run: information ITHIM-R run name input parameter file, name scenario definition used, reference scenario, scenario names, computation mode (constant sample), timestamp model run, output version number, author model run additional comments particular model run.","code":""},{"path":"/How_To_Run_ITHIM.html","id":"summary-of-key-results---needs-further-work","dir":"","previous_headings":"Results","what":"Summary of key results - NEEDS FURTHER WORK!!!!!","title":"How to run ITHIM-Global","text":"various scripts can used produce output summary tables results call markdown documents output .html files csv files (location stored) results_app - Shiny application","code":""},{"path":"/How_To_Run_ITHIM.html","id":"structure-of-ithim-global-github-repository---bogota-branch","dir":"","previous_headings":"","what":"Structure of ITHIM-Global Github repository - Bogota branch","title":"How to run ITHIM-Global","text":"Github repository Bogota branch structured follows: .github: specifies metadata various documents, automatically created Github. R: contains R functions written ITIHM-R package. docs: documentation ITHIM-R package build automatically. inst/extdata: folder containing local city specific global input files. man: manual containing various functions used within ITHIM-R figures used various documentation documents. also build automatically. results: contains results model runs. results_app: contains functions used produce Shiny pivot tables results. .Rbuildignore, .gitignore: metadata created Github. Bogota_InputParameters_vxx.xlsx - file containing city specific input parameters needs manual updating. Create_output_summaries.R - wrapper script create various output documents. DESCRIPTION: automatically created Github. How_To_Run_ITHIM: document describing various steps needed run ITHIM-Global model downloading installing ITHIM-R preparing input parameter files running code. ITHIM-R.Rproj: contains metadata ITHIM-R package. NAMESPACE: automatically created Github. OutputVersionControl.txt: file storing main run information ITHIM-R runs. automatically updated, required, using multi_city_script.R. README: document giving overview ITHIM-R package. _config.yml, _pkgdown.yml: metadata created Github. injury_tables.Rmd: xxxxxxxxxxxxxxxxxxxx license.md: details license conditions using ITHIM-R package. multi_city_script.R: wrapper function call various functions needed perform ITHIM-Global analysis. summary_tables.Rmd: xxxxxxxx summary_tables_SHAnumber: xxxxxx summary_tables_PA: xxxxxxxxxx","code":""},{"path":"/index.html","id":"ithim-r","dir":"","previous_headings":"","what":"Integrated Transport and Health Impact Model","title":"Integrated Transport and Health Impact Model","text":"Development Integrated Transport Health Impact Modelling Tool (ITHIM) R, also known ITHIM version 3.0. Started January 2018. document aims comprehensive record calculations ITHIM pipeline, specifically ITHIM- R package.","code":""},{"path":"/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Integrated Transport and Health Impact Model","text":"cite package ‘ithimr’ publications use: Rob Johnson Ali Abbas (2021). ithimr: Integrated Transport Health Impact Model. R package version 0.1.1. BibTeX entry LaTeX users @Manual{, title = {ithimr: Integrated Transport Health Impact Model}, author = {Rob Johnson Ali Abbas}, year = {2021}, note = {R package version 0.1.1}, }","code":""},{"path":"/index.html","id":"outline","dir":"","previous_headings":"","what":"Outline","title":"Integrated Transport and Health Impact Model","text":"ITHIM performs integrated assessments health effects transport scenarios policies urban national levels. health effects transport policies modelled changes physical activity, road traffic injury risk, exposure fine particulate matter (PM2.5) air pollution CO2 emissions. ITHIM used researchers health transport professionals estimate health impacts scenarios, compare effects travel patterns different locations, model effects interventions. ITHIM works either stand-alone model can linked models (e.g. transport, health, economic) quasi-microsimulation model exposure individual person level, health impacts estimated aggregated age groups, constrained available Global Burden Disease (GBD) data.","code":""},{"path":"/index.html","id":"physical-activity","dir":"","previous_headings":"Outline","what":"Physical Activity","title":"Integrated Transport and Health Impact Model","text":"ITHIM models exposure physical activity comparing distributions weekly physical activity different scenarios. Walking, cycling types physical activity combined marginal MET hours per week activity. Outcomes affected physical activity include several cardiovascular diseases, depression, dementia, diabetes, breast cancer colon cancer. ITHIM also models changes health -cause mortality. comparative risk assessment method used estimate changes population physical activity lead changes health burden.","code":""},{"path":"/index.html","id":"road-traffic-injuries","dir":"","previous_headings":"Outline","what":"Road traffic injuries","title":"Integrated Transport and Health Impact Model","text":"Road traffic injuries modelled using model based risk, distance speed. Differences risk sex age also taken account. approach allows ITHIM look absolute number injuries risk injury might change different modes transport travel distances modes change.","code":""},{"path":"/index.html","id":"air-pollution","dir":"","previous_headings":"Outline","what":"Air Pollution","title":"Integrated Transport and Health Impact Model","text":"Fine particulate matter (PM2.5) air pollution risks calculated general population (background rates) well mode specific rates different transport modes. Exposure changes population based comparison locally generated PM2.5 emissions concentrations study area. current ITHIM version (v3), personal exposure air pollution walking cycling also taken account.","code":""},{"path":"/index.html","id":"co2-emissions","dir":"","previous_headings":"Outline","what":"CO2 Emissions","title":"Integrated Transport and Health Impact Model","text":"carbon effects pathway models carbon dioxide (CO2) emissions motorised vehicles. CO2 pathway estimates single metric: total CO2 emissions modelled scenario. method calculate CO2 emissions similar one PM2.5.","code":""},{"path":"/index.html","id":"health-outcomes","dir":"","previous_headings":"Outline","what":"Health outcomes","title":"Integrated Transport and Health Impact Model","text":"health effects ITHIM presented years life lost (YLLs) number attributable deaths. Background burden data study areas estimated Global Burden Disease studies.","code":""},{"path":"/index.html","id":"data-inputs","dir":"","previous_headings":"","what":"Data inputs","title":"Integrated Transport and Health Impact Model","text":"ITHIM-R requires 5 user defined input files csv format, saved directory city’s name. See inst/ext/local/bogota example files. also numerous assumptions can parameterize model.","code":""},{"path":"/index.html","id":"file-inputs","dir":"","previous_headings":"Data inputs","what":"File inputs","title":"Integrated Transport and Health Impact Model","text":"section talks files (datasets) required setup run model. two subsections, : case study specific datasets global datasets - dose-response relationship Air Pollution module etc","code":""},{"path":"/index.html","id":"case-study-specifics","dir":"","previous_headings":"","what":"Case study specifics","title":"Integrated Transport and Health Impact Model","text":"section covers file inputs (specific city) required run model. Travel survey (example trips dataset). table trips taken group people given day. also includes people take trips. One row per trip (stage trip) Minimal columns: participant_id, age, sex, trip_mode, trip_duration (trip_distance) columns: stage_mode, stage_duration (stage_distance) Injury events (example injuries dataset). table recorded road-traffic injury (fatality) events city one years. One row per event Minimal columns: victim mode (cas_mode) strike mode (strike_mode) columns: year, cas_age, cas_gender, weight (e.g. multiple years combined) Disease burden data (example burden dataset). One row per disease/metric/age/gender combination Minimal rows: Measure (death/YLL); sex_name (Male/Female); age_name (‘x y’); cause_name (disease names); val (value burden); population (number people val corresponds , e.g. population country) Population city (example population dataset). used order scale burden Disease burden data city’s population study One row per demographic group Columns: sex, age, population age column share boundaries age_name Disease burden data, can aggregated Physical activity survey (example physical activity dataset) One row per person Columns: sex, age, ltpa_marg_met (total non-occupational PA week)","code":""},{"path":"/index.html","id":"global-file-inputs","dir":"","previous_headings":"","what":"Global file inputs","title":"Integrated Transport and Health Impact Model","text":"order setup model, need fixed list tables/datasets, : Disease interaction table . table list diseases/causes specific module Air Pollution Physical Activity also interaction Air Pollution Exposure Response Functions (ERFs) exposure response relationships air pollution (PM2.5) impact health via diseases/causes. collected/cleaned datasets published studies . Physical Activity Dose-Response Functions (DRFs) dose response relationships physical activity impact health via diseases/causes. Similar AP, comes published studies. now sits independent R package called drpa.","code":""},{"path":"/index.html","id":"how-to-run-the-model","dir":"","previous_headings":"","what":"How to run the model?","title":"Integrated Transport and Health Impact Model","text":"setup, reading required datasets initialising variables, call run_ithim_setup run model, call run_ithim. function used call run_ithim_setup run_ithim multi_city_script also reads relevant input parameter file.","code":""},{"path":"/reference/add_distance_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Add strike and casualty distances to injury tables — add_distance_columns","title":"Add strike and casualty distances to injury tables — add_distance_columns","text":"function adds strike casualty distance information  individual age sex categories aggregated mode -hit-(whw) --vehicle (nov) injury fatality matrices.","code":""},{"path":"/reference/add_distance_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add strike and casualty distances to injury tables — add_distance_columns","text":"","code":"add_distance_columns(   injury_table,   mode_names,   true_distances_0,   dist,   scenarios = SCEN )"},{"path":"/reference/add_distance_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add strike and casualty distances to injury tables — add_distance_columns","text":"injury_table (list ) data frame(s) edited, contains aggregated fatality counts split whw nov matrices mode_names modes take distances , taken aggregated modes trip data true_distances_0 population distances add injury table dist table used access bus distance - currently used scenarios scenarios process","code":""},{"path":"/reference/add_distance_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add strike and casualty distances to injury tables — add_distance_columns","text":"injury tables strike casualty distance information whw nov matrices","code":""},{"path":"/reference/add_distance_columns.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add strike and casualty distances to injury tables — add_distance_columns","text":"function performs following steps: set dataframe containing age sex categories found   injury table input data add age sex index mode distances define list two elements whw nov indices used    true_distances dataframe age sex categories define list (two elements whw nov) matching indices mode_names   casualty modes injury table whw matrix create strike mode indices vector matching strike modes   injury table strike_modes vector find strike casualty distances modes injury tables sum   across age sex categories individual age sex category. modes   exist injury tables known distances, mean mode distances   known modes used add strike casualty modes whw nov matrices injuries_list output list","code":""},{"path":"/reference/add_ghost_trips.html","id":null,"dir":"Reference","previous_headings":"","what":"Addition of ghost trips — add_ghost_trips","title":"Addition of ghost trips — add_ghost_trips","text":"Add trips get assigned physical activity component,  can used proxy vehicle distances.","code":""},{"path":"/reference/add_ghost_trips.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Addition of ghost trips — add_ghost_trips","text":"","code":"add_ghost_trips(   raw_trip_set,   trip_mode = \"bus_driver\",   distance_ratio = BUS_TO_PASSENGER_RATIO * DISTANCE_SCALAR_PT,   reference_mode = \"bus\",   prop_male = 1,   agerange_male = \"18, 65\",   agerange_female = \"18, 65\",   scenario = NA )"},{"path":"/reference/add_ghost_trips.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Addition of ghost trips — add_ghost_trips","text":"raw_trip_set data frame trips trip_mode mode add distance_ratio fraction reference distance use calculate new mode distance reference_mode name reference mode prop_male proportion newly added mode assigned males agerange_male age range males associated newly added mode agerange_female age range female drivers associated newly added mode scenario name scenario mode added","code":""},{"path":"/reference/add_ghost_trips.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Addition of ghost trips — add_ghost_trips","text":"data frame trips","code":""},{"path":"/reference/add_ghost_trips.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Addition of ghost trips — add_ghost_trips","text":"function creates trips based distance relative another (reference) mode,  without altering synthetic population. .e. adds trips get assigned physical  activity component. function can used add e.g. car_driver bus_driver trips  used proxy vehicle distances needed injury CO2 pathways.  can also used add truck commercial motorcycle trips included travel surveys. needed injury pathway, newly added trips assigned trips made males  females based proportion males given input parameter. age ranges males females taking newly added trips can also defined. new mode distance equally split number people times number trips per people  added. used distance new male trips. proportion female trips tends low, distance calculated male trips split 10 using 10th distance male trips, 10 times many female trips added compared low number female trips added distance used male trips.  E.g. number people added 100 1 trip per person 98 trips made males, add 98 male trips 10 * 2 = 20 female trips  10th distance male trips. ensure better representation  demographics female trips whilst keeping number newly added trips  small possible reduce run time model. function performs following steps: set number people (regards males) trips per per person added find total distance reference mode find age ranges male female trips find number male female participants calculate total distance new mode added based reference distance   find speed new mode male trips: define distance range male trip added, assume trip equal length add new male trips sampling given age range (add_trips.R) add age distance categories plus scenario name repeat female trips (assuming female trips 10th distance   male trips adding proportionally 10 times many female trips)","code":""},{"path":"/reference/add_motorcycle_trips_Chile.html","id":null,"dir":"Reference","previous_headings":"","what":"Personal motorcycle trips for Chilean cities — add_motorcycle_trips_Chile","title":"Personal motorcycle trips for Chilean cities — add_motorcycle_trips_Chile","text":"Function create personal motorcycle trips Chilean cities","code":""},{"path":"/reference/add_motorcycle_trips_Chile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Personal motorcycle trips for Chilean cities — add_motorcycle_trips_Chile","text":"","code":"add_motorcycle_trips_Chile(raw_trip_set, PROPORTION_MOTORCYCLE_TRIPS)"},{"path":"/reference/add_motorcycle_trips_Chile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Personal motorcycle trips for Chilean cities — add_motorcycle_trips_Chile","text":"raw_trip_set data frame trips travel survey PROPORTION_MOTORCYCLE_TRIPS proportion trips travel survey added personal motorcycle trips","code":""},{"path":"/reference/add_motorcycle_trips_Chile.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Personal motorcycle trips for Chilean cities — add_motorcycle_trips_Chile","text":"original trip data additional personal motorcycle trips added","code":""},{"path":"/reference/add_motorcycle_trips_Chile.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Personal motorcycle trips for Chilean cities — add_motorcycle_trips_Chile","text":"function used create personal motorcycle trips Chilean cities  motorcycle trips travel surveys. uses input existing travel survey data city  proportion travel survey trips added additional new motorcycle trips. Based analysis motorcycle trips travel surveys Santiago, San Antonio,  Valparaiso Puerto Montt makes assumptions split male female  motorcyclists, number trips per person truncated normal distributions distances ages drivers personal motorcycle trips added. creates  new trips assuming trip one stage, .e. trip duration distance equals stage duration distance. function contains following steps: characteristics motorcycle trips added defined set parameters truncated normal distributions male    female trip duration set parameters truncated normal distributions male    female age ranges find number male female motorcycle trips added divide number new male female trips 2 (= number trips per person)   calculate number new participant ids added. number male   female trips odd, add additional trip get trip number divisible 2 sample truncated normal distributions find duration new trips (assuming   trip consists one stage) sample known age ranges find ages new male female    motorcycle trips create new motorcycle trips","code":""},{"path":"/reference/add_trips.html","id":null,"dir":"Reference","previous_headings":"","what":"Additional trips for trip data set — add_trips","title":"Additional trips for trip data set — add_trips","text":"Creates data frame given characteristics added existing trip data set.","code":""},{"path":"/reference/add_trips.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Additional trips for trip data set — add_trips","text":"","code":"add_trips(   trip_ids = 0,   new_mode = \"pedestrian\",   distance = 1,   participant_id = 0,   age = 20,   sex = \"male\",   nTrips = 3,   speed = 4.8 )"},{"path":"/reference/add_trips.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Additional trips for trip data set — add_trips","text":"trip_ids ids new trips new_mode mode new trips distance distances sample participant_id participant id new trips age age participant sex sex participant nTrips number trips participant speed speed new trips","code":""},{"path":"/reference/add_trips.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Additional trips for trip data set — add_trips","text":"data frame trips","code":""},{"path":"/reference/add_trips.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Additional trips for trip data set — add_trips","text":"function used create new trips certain characteristics can added existing trip data set. input distance given upper limit trip distances added function takes number trips per  person (nTrips) random samples 1 input distance given. Age sex participant also  sampled range input age sex values. function performs following steps: create nTrips new trips sampling distances, ages sexes","code":""},{"path":"/reference/add_walk_trips.html","id":null,"dir":"Reference","previous_headings":"","what":"Addition of 'walk to public transport' stages to trip set — add_walk_trips","title":"Addition of 'walk to public transport' stages to trip set — add_walk_trips","text":"Add walk 'public transport stages' public transport trips walking stage","code":""},{"path":"/reference/add_walk_trips.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Addition of 'walk to public transport' stages to trip set — add_walk_trips","text":"","code":"add_walk_trips(pt_trips)"},{"path":"/reference/add_walk_trips.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Addition of 'walk to public transport' stages to trip set — add_walk_trips","text":"pt_trips data frame PT trips without walking component","code":""},{"path":"/reference/add_walk_trips.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Addition of 'walk to public transport' stages to trip set — add_walk_trips","text":"list data frames PT trips walk--PT trips","code":""},{"path":"/reference/add_walk_trips.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Addition of 'walk to public transport' stages to trip set — add_walk_trips","text":"Function add additional walking stages public transport trips walking stage  longer trip duration MINIMUM_PT_TIME plus BUS_WALK_TIME / RAIL_WALK_TIME parameters. MINIMUM_PT_TIME global input parameter determines minimum amount time  (minutes) person travelling public transport spends public transport stage. BUS_WALK_TIME / RAIL_WALK_TIME  parameter city specific input parameter determines duration walk public transport walking stage. function performs following steps: filter PT stages PT trips keep stage longest duration   add one 'walk public transport' stage per trip find trip stages need changing add new 'walk pt' stages. duration public transport stage shorter     BUS_WALK_TIME / RAIL_WALK_TIME + MINIMUM_PT_TIME, set new stage duration 3. Otherwise,    set new stage duration either BUS_WALK_TIME RAIL_WALK_TIME depending trip mode update original public transport stage duration calculate 'walk pt' stage distance using walking speed update original public transport stage distance using respective public transport   speed updated duration keep record number newly added 'walk pt' stages update total trip distances update trip distance categories remove 'walk pt' stages zero duration length","code":""},{"path":"/reference/AP_dose_response.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate relative risk given PM exposure level — AP_dose_response","title":"Calculate relative risk given PM exposure level — AP_dose_response","text":"Calculate relative risk (RR) person synthetic population  disease related air pollution scenario based individual PM exposure levels","code":""},{"path":"/reference/AP_dose_response.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate relative risk given PM exposure level — AP_dose_response","text":"","code":"AP_dose_response(cause, dose, quantile, confidence_intervals = F)"},{"path":"/reference/AP_dose_response.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate relative risk given PM exposure level — AP_dose_response","text":"cause name disease dose vector PM exposure levels individuals given age range scenario quantile quantile dose response functions used output value confidence_intervals logic: whether return confidence intervals","code":""},{"path":"/reference/AP_dose_response.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate relative risk given PM exposure level — AP_dose_response","text":"data frame relative risks person synthetic population AP related disease scenario","code":""},{"path":"/reference/AP_dose_response.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate relative risk given PM exposure level — AP_dose_response","text":"function performs following steps: various checks ensure correct PM exposure levels (doses) disease read get lookup table required dose response functions contains dose   median RR upper lower confidence interval RR values PM exposure doses synthetic population find needed RR extrapolating    dose responses given lookup table confidence interval required, repeat interpolation using upper lower   confidence RR values required quantile 0.5, .e. median, find required RR value   defining normal function mean median RR value dose standard deviations   defined upper lower confidence RR values. Use correct quantile   normal function RR value.","code":""},{"path":"/reference/ap_dose_response_curve.html","id":null,"dir":"Reference","previous_headings":"","what":"Computes RR as a DR relationship - CURRENTLY NOT USED — ap_dose_response_curve","title":"Computes RR as a DR relationship - CURRENTLY NOT USED — ap_dose_response_curve","text":"Computes RR DR relationship given four parameters PM2.5 exposure","code":""},{"path":"/reference/ap_dose_response_curve.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Computes RR as a DR relationship - CURRENTLY NOT USED — ap_dose_response_curve","text":"","code":"ap_dose_response_curve(pm, alpha, beta, gamma, tmrel)"},{"path":"/reference/ap_dose_response_curve.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Computes RR as a DR relationship - CURRENTLY NOT USED — ap_dose_response_curve","text":"pm PM2.5 exposure alpha DR parameter beta DR parameter gamma DR parameter tmrel DR parameter","code":""},{"path":"/reference/ap_dose_response_curve.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Computes RR as a DR relationship - CURRENTLY NOT USED — ap_dose_response_curve","text":"RR","code":""},{"path":"/reference/assign_age_groups.html","id":null,"dir":"Reference","previous_headings":"","what":"Assign age groups to individuals — assign_age_groups","title":"Assign age groups to individuals — assign_age_groups","text":"Prunes dataset given max min ages, .e. removes entries people ages outside scope model  assigns age group labels given age","code":""},{"path":"/reference/assign_age_groups.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assign age groups to individuals — assign_age_groups","text":"","code":"assign_age_groups(   dataset,   age_category = AGE_CATEGORY,   age_lower_bounds = AGE_LOWER_BOUNDS,   max_age = MAX_AGE,   min_age = AGE_LOWER_BOUNDS[1],   age_label = \"age\" )"},{"path":"/reference/assign_age_groups.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assign age groups to individuals — assign_age_groups","text":"dataset data frame age categories added ages outside model scope removed age_category vector strings giving age categories age_lower_bounds lower boundaries age categories max_age maximum age model min_age minimum age model age_label string label age column","code":""},{"path":"/reference/assign_age_groups.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assign age groups to individuals — assign_age_groups","text":"edited data frame","code":""},{"path":"/reference/assign_age_groups.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Assign age groups to individuals — assign_age_groups","text":"function contains following steps: remove dataset entries ages max min ages missing age information add age categories","code":""},{"path":"/reference/beta_pointiness.html","id":null,"dir":"Reference","previous_headings":"","what":"Parameterise confidence in PA data - CURRENTLY NOT IN USE — beta_pointiness","title":"Parameterise confidence in PA data - CURRENTLY NOT IN USE — beta_pointiness","text":"Takes confidence value 0 1 returns parameter beta distribution","code":""},{"path":"/reference/beta_pointiness.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parameterise confidence in PA data - CURRENTLY NOT IN USE — beta_pointiness","text":"","code":"beta_pointiness(confidence)"},{"path":"/reference/beta_pointiness.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parameterise confidence in PA data - CURRENTLY NOT IN USE — beta_pointiness","text":"confidence value 0 1 representing confident PA dataset","code":""},{"path":"/reference/beta_pointiness.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parameterise confidence in PA data - CURRENTLY NOT IN USE — beta_pointiness","text":"value parametrise beta distribution","code":""},{"path":"/reference/combined_rr_ap_pa.html","id":null,"dir":"Reference","previous_headings":"","what":"Combine relative risks from air pollution and physical activity — combined_rr_ap_pa","title":"Combine relative risks from air pollution and physical activity — combined_rr_ap_pa","text":"Combine relative risks (RR) air pollution (AP) physical activity (PA)  multiplication diseases affected AP PA","code":""},{"path":"/reference/combined_rr_ap_pa.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combine relative risks from air pollution and physical activity — combined_rr_ap_pa","text":"","code":"combined_rr_ap_pa(ind_pa, ind_ap, conf_int = FALSE)"},{"path":"/reference/combined_rr_ap_pa.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combine relative risks from air pollution and physical activity — combined_rr_ap_pa","text":"ind_pa data frame individual RRs diseases affected PA ind_ap data frame individual RRs diseases affected AP conf_int logic: whether include confidence interval dose response relationships ","code":""},{"path":"/reference/combined_rr_ap_pa.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Combine relative risks from air pollution and physical activity — combined_rr_ap_pa","text":"dataframe giving RR risk AP, PA combined AP PA exposure levels every person synthetic population scenario","code":""},{"path":"/reference/combined_rr_ap_pa.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Combine relative risks from air pollution and physical activity — combined_rr_ap_pa","text":"function performs following steps: join ap pa relative risk datasets loop disease outcomes affected PA AP: scenario multiply relative risks PA AP store new column confidence intervals required, multiply upper lower RR AP     PA respectively wherever possible, otherwise use given median RR values instead","code":""},{"path":"/reference/combine_health_and_pif.html","id":null,"dir":"Reference","previous_headings":"","what":"Combine health and potential impact fraction (PIF) — combine_health_and_pif","title":"Combine health and potential impact fraction (PIF) — combine_health_and_pif","text":"Applies PIF calculated relative risks (RRs) current observed health burden  Global Burden Disease data generate scenario health burdens","code":""},{"path":"/reference/combine_health_and_pif.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combine health and potential impact fraction (PIF) — combine_health_and_pif","text":"","code":"combine_health_and_pif(pif_values, hc = DISEASE_BURDEN)"},{"path":"/reference/combine_health_and_pif.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combine health and potential impact fraction (PIF) — combine_health_and_pif","text":"pif_values vector values PIFs age sex categories hc data frame current burden disease","code":""},{"path":"/reference/combine_health_and_pif.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Combine health and potential impact fraction (PIF) — combine_health_and_pif","text":"estimated scenario burden disease age sex categories","code":""},{"path":"/reference/combine_health_and_pif.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Combine health and potential impact fraction (PIF) — combine_health_and_pif","text":"function performs following steps: current observed health burden particular disease multiplied PIF, .e   change fraction disease expected current scenario compared   reference scenario","code":""},{"path":"/reference/complete_trip_distance_duration.html","id":null,"dir":"Reference","previous_headings":"","what":"Add missing trip information — complete_trip_distance_duration","title":"Add missing trip information — complete_trip_distance_duration","text":"Adds missing trip information stage duration stage distance.","code":""},{"path":"/reference/complete_trip_distance_duration.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add missing trip information — complete_trip_distance_duration","text":"","code":"complete_trip_distance_duration()"},{"path":"/reference/complete_trip_distance_duration.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add missing trip information — complete_trip_distance_duration","text":"function performs following steps calculate stage duration stage distance. Note need least trip duration stage distance stage stage duration: add speed column stage duration: calculate stage duration stage distance given using mode speeds stage duration sum 'NA' (.e. stage distances exist stage distances ): trip duration exists sum NA, find trip ids 'NA' stage duration replace        stage duration trip duration divided number stages particular trip remove remaining trips 'NA' stage distance update stage speed column stage distance: calculate stage distance using stage duration mode speeds trip distance: calculate trip distance summing stage distances","code":""},{"path":"/reference/create_bogota_scenarios.html","id":null,"dir":"Reference","previous_headings":"","what":"Create scenarios for Bogota — create_bogota_scenarios","title":"Create scenarios for Bogota — create_bogota_scenarios","text":"Creates three scenarios one, mode share given mode elevated set percentage total trips. scenario modes cycle, car, bus.","code":""},{"path":"/reference/create_bogota_scenarios.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create scenarios for Bogota — create_bogota_scenarios","text":"","code":"create_bogota_scenarios(trip_set)"},{"path":"/reference/create_bogota_scenarios.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create scenarios for Bogota — create_bogota_scenarios","text":"trip_set data frame, baseline scenario trips","code":""},{"path":"/reference/create_bogota_scenarios.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create scenarios for Bogota — create_bogota_scenarios","text":"list baseline scenario three scenarios","code":""},{"path":"/reference/create_bogota_scenarios.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create scenarios for Bogota — create_bogota_scenarios","text":"function creates three scenarios increasing mode shares cycling, car bus pre-defined percentage total mode shares.  assume : total number trips remains trips modes    (apart truck, bus driver, car driver commercial motorcycle trips   remain unchanged - least initially) converted mode    question; truck commercial motorcycle trips remain constant across    scenarios whilst bus driver car driver trips updated based new    total distance car bus trips increase mode share    conducted scenario percentage share across three distance bands mode    increased preserved, .e. 10   band 0-2km increasing cycling mode share x   still 10 scenario always convert    question, independently original overall mode share mode.    .e. e.g. 1   5   car scenario 55   total trips. preserve proportion trips distance band. E.g. 20   trips distance band 0-2km, scenario 20   trips still distance band 0-2km. Example: Assume two distance bands B 80 cycling trips lie distance band remaining 20 band B.  Assume 60 band B.  Assume want increase cycling mode share 5 , need convert 5 cycling trips 5 cycling trips. Overall, leads increase  (5 cycling trips, whilst preserving cycling mode shares 80 band 20 distance band 40 preserved. function performs following steps: overall mode shares cycle, car bus modes across three   distance categories defined trip data extract trip information, calculate total number trips   find proportion trips distance category find proportion trips converted mode, scenario distance category define modes changeable (least initially) scenarios    divide trip data set modes can changed another set   trips whose modes changed split changeable trips also trips distance band create scenarios loop scenarios: loop distance band: find changeable trips mode increased count number trips made mode increased bus scenario aim increase public transport trips,            .e. find changeable trips made bus rail count            number trips made bus rail find number total trips like convert number trips changeable equals number trips           converted, changeable trips converted mode question trips changeable want change,            sample number trips change changeable trip ids trips converted changeable trips,           convert many trips possible create warning message convert required trips new mode question add trips across distance bands add non-changeable trips update bus_driver car_driver trips create list containing trips scenario elements","code":""},{"path":"/reference/create_global_scenarios.html","id":null,"dir":"Reference","previous_headings":"","what":"Create global scenarios — create_global_scenarios","title":"Create global scenarios — create_global_scenarios","text":"Creates four scenarios one, mode share given mode elevated set percentage total trips. scenario modes cycle, car, bus motorcycle.","code":""},{"path":"/reference/create_global_scenarios.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create global scenarios — create_global_scenarios","text":"","code":"create_global_scenarios(trip_set)"},{"path":"/reference/create_global_scenarios.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create global scenarios — create_global_scenarios","text":"trip_set data frame, baseline scenario","code":""},{"path":"/reference/create_global_scenarios.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create global scenarios — create_global_scenarios","text":"list baseline scenario four mode scenarios","code":""},{"path":"/reference/create_global_scenarios.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create global scenarios — create_global_scenarios","text":"function creates four scenarios increasing mode shares cycling, car, bus motorcycle pre-defined percentage total mode shares.  assume : total number trips remains trips modes    (apart truck, bus driver, car driver commercial motorcycle trips   remain unchanged - least initially) converted mode    question; truck commercial motorcycle trips remain constant across    scenarios whilst bus driver car driver trips updated based new    total distance car bus trips increase mode share    conducted scenario percentage share across three distance bands mode    increased preserved, .e. 10   band 0-2km increasing cycling mode share x   still 10   mean mode split across 28 cities (Antofagasta, Arica, Belo Horizonte,    Bogota, Buenos Aires, Cali, Copiapo, Coquimbo / La Serena, Gran Valparaiso,   Iquique / Alto Hospicio, Medellin, Mexico City, Montevideo, Osorno, Puerto Montt,   San Antonio, Santiago, Sao Paulo, Temuco / Padre las Casas, Valdivia, Accra,    Bangalore, Cape Town, Delhi, Vizag, Kisumu, Nairobi Port Louis)    baseline mode split mode. scenario always convert    question, independently original overall mode share mode.    .e. e.g. 1   5   car scenario 55   total trips. preserve proportion trips distance band. E.g. 20   trips distance band 0-2km, scenario 20   trips still distance band 0-2km. proportions calculated    city individually. Example: Assume two distance bands B 80 cycling trips lie distance band remaining 20 band B.  Assume 60 band B.  Assume want increase cycling mode share 5 , need convert 5 cycling trips 5 cycling trips. Overall, leads increase  (5 cycling trips, whilst preserving cycling mode shares 80 band 20 distance band 40 preserved. function performs following steps: overall mode shares cycle, car, bus motorcycle   modes across three distance categories defined trip data extract trip information, calculate total number trips   find proportion trips distance category find proportion trips converted mode, scenario distance category define modes changeable (least initially) scenarios    divide trip data set modes can changed another set   trips whose modes changed split changeable trips also trips distance band create scenarios loop scenarios, .e. 4 different modes: loop distance band: find changeable trips mode increased count number trips made mode increased bus scenario aim increase public transport trips,            .e. find changeable trips made bus rail count            number trips made bus rail find number total trips like convert number trips changeable equals number trips           converted, changeable trips converted mode question trips changeable want change,            sample number trips change changeable trip ids trips converted changeable trips,           convert many trips possible create warning message convert required trips new mode question add trips across distance bands add non-changeable trips update bus_driver car_driver trips create list containing trips scenario elements","code":""},{"path":"/reference/create_synth_pop.html","id":null,"dir":"Reference","previous_headings":"","what":"Creates synthetic population — create_synth_pop","title":"Creates synthetic population — create_synth_pop","text":"Creates synthetic population matching individuals trip set individuals physical activity (PA) dataset","code":""},{"path":"/reference/create_synth_pop.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Creates synthetic population — create_synth_pop","text":"","code":"create_synth_pop(raw_trip_set)"},{"path":"/reference/create_synth_pop.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Creates synthetic population — create_synth_pop","text":"raw_trip_set data frame raw trips taken, bus_driver, new motorcycle truck trips already added","code":""},{"path":"/reference/create_synth_pop.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Creates synthetic population — create_synth_pop","text":"synthetic population trip set pruned","code":""},{"path":"/reference/create_synth_pop.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Creates synthetic population — create_synth_pop","text":"function performs following steps: adds age category trip physical activity datasets calling assign_age_groups.R match people trip data people physical activity dataset: create synthetic population taking unique participant ids together age gender     information trip data (including bus driver, truck, car driver commercial      motorcycle trips) assign non-occupational physical activity MMET values      synthetic population, following steps performed:  sex age category, find proportion people zero non-occupational MMET values       also find list people non-zero MMET values BACKGROUND_PA_CONFIDENCE < 1 calling value information script, .e.        input values sampled distributions, beta distribution built        proportion people zero work leisure MMET values sampled using         known proportion mean distribution sample replacement vector 0 MMET values vector non-zero MMET values (      people non-zero work leisure MMET values) using proportion people       zero work leisure MMET values assign sampled MMET values synthetic population remove participants trip stage modes Vehicle inventory","code":""},{"path":"/reference/dirichlet_pointiness.html","id":null,"dir":"Reference","previous_headings":"","what":"Function for Dirichlet parameters — dirichlet_pointiness","title":"Function for Dirichlet parameters — dirichlet_pointiness","text":"Function map confidence value parameterisation Dirichlet distribution.","code":""},{"path":"/reference/dirichlet_pointiness.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function for Dirichlet parameters — dirichlet_pointiness","text":"","code":"dirichlet_pointiness(confidence)"},{"path":"/reference/dirichlet_pointiness.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function for Dirichlet parameters — dirichlet_pointiness","text":"confidence value 0 1","code":""},{"path":"/reference/dirichlet_pointiness.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function for Dirichlet parameters — dirichlet_pointiness","text":"parameterisation","code":""},{"path":"/reference/dirichlet_pointiness.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Function for Dirichlet parameters — dirichlet_pointiness","text":"Note parameterisation somewhat arbitrary seems work visual inspection.","code":""},{"path":"/reference/distances_for_injury_function.html","id":null,"dir":"Reference","previous_headings":"","what":"Get distances and parameterise Poisson regression model for injuries — distances_for_injury_function","title":"Get distances and parameterise Poisson regression model for injuries — distances_for_injury_function","text":"Computes exposures (distances) mode parameterise injury regression model,  computed Poisson model used ITHIM-Global model predict injury fatalities later stage","code":""},{"path":"/reference/distances_for_injury_function.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get distances and parameterise Poisson regression model for injuries — distances_for_injury_function","text":"","code":"distances_for_injury_function(journeys, dist)"},{"path":"/reference/distances_for_injury_function.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get distances and parameterise Poisson regression model for injuries — distances_for_injury_function","text":"journeys data frame total distance (total population) age sex category scenario dist table (total population) distances per mode","code":""},{"path":"/reference/distances_for_injury_function.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get distances and parameterise Poisson regression model for injuries — distances_for_injury_function","text":"true_distances (mode distances age sex walking modes car modes combined bus drivers added relevant), injuries_list (list strike, casualty, age, sex mode distance combinations baseline scenarios), reg_model (parameterised Poisson regression model), injuries_for_model (baseline data containing injury counts casualty strike mode combinations associated distance data)","code":""},{"path":"/reference/distances_for_injury_function.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get distances and parameterise Poisson regression model for injuries — distances_for_injury_function","text":"function uses distance data individual injury fatality data perform following steps parameterise Poisson injury regression model: stage modes aggregated walk related stages (walk walk pt) mode (walk),     similarly car related journeys bus drivers added bus journeys (relevant) accurately represent people bus Takes Baseline injury tables, split -hit (whw) --vehicle (nov) parts,    adds total population distances strike casualty mode (add_distance_columns.R).     Distances added age gender category exists information     injury counts (injuries_for_model dataframe). exists fatality casualty     strike mode age sex category mode distance age sex category,     fatalities distances aggregated strike casualty mode.     , aggregation still exist fatalities either casualty     strike mode distance missing, fatalities removed    predict injury counts zero distances. However, happen    total distances modes (possibly inferred     modes) appear injury data. - data used parameterise    Poisson injury model. new list (injuries_list) created containing strike casualty mode age sex combinations     together strike casualty mode distances (add_distance_columns.R) baseline scenarios.     whw model, strike mode casualty pairs strike mode equals casualty mode    removed fatalities combinations already added nov matrix.    Combinations non-zero strike casualty mode distance     also removed. - list later used injuries_function_2.R function    predict fatality counts using Poisson injury regression model. casualty strike mode exponents used account safety number effect    added injuries_for_model injuries_list. best possible regression model built using Baseline injury counts distances     (injuries_for_model) standard errors small wherever possible. Strike     casualty mode pairs cas mode = strike mode removed still exist    removed ithim_load_data.R function.    Two different forms whw nov matrices defined, taking account age sex    information exists. standard errors newly built regression models     checked large data aggregated age     sex yet, data aggregated new Poisson regression model build.     standard errors still large aggregation, message     printed screen warning standard errors large.","code":""},{"path":"/reference/dist_dur_tbls.html","id":null,"dir":"Reference","previous_headings":"","what":"Get distances and duration summaries by mode — dist_dur_tbls","title":"Get distances and duration summaries by mode — dist_dur_tbls","text":"Summaries total distances durations spent travelling per mode per scenario, synthetic population","code":""},{"path":"/reference/dist_dur_tbls.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get distances and duration summaries by mode — dist_dur_tbls","text":"","code":"dist_dur_tbls(trip_scen_sets)"},{"path":"/reference/dist_dur_tbls.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get distances and duration summaries by mode — dist_dur_tbls","text":"trip_scen_sets list synthetic trip sets scenario including baseline","code":""},{"path":"/reference/dist_dur_tbls.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get distances and duration summaries by mode — dist_dur_tbls","text":"list table (total) distances durations per mode per scenario","code":""},{"path":"/reference/dist_dur_tbls.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get distances and duration summaries by mode — dist_dur_tbls","text":"function performs following steps: loop scenarios (incl Baseline): using trip data, sum across distances stage mode get total     distance mode scenario synthetic population sum across duration stage mode get total duration mode scenario 'walk_to_pt' stages exist, add pedestrian stages      duration distance create one dataframe containing total distances mode scenario create one dataframe containing total duration mode scenario remove 'walk_to_pt' stages added pedestrian stages update bus car driver distances duration scenarios using    ratio bus/car bus_driver/car_driver baseline scenario (  redundant GLOBAL, BOGOTA, AFRICA_INDIA LATAM scenario definitions   bus car driver distances already updated scenario creation)","code":""},{"path":"/reference/gen_ap_rr.html","id":null,"dir":"Reference","previous_headings":"","what":"Get relative risk for diseases given PM exposure — gen_ap_rr","title":"Get relative risk for diseases given PM exposure — gen_ap_rr","text":"Computes relative risk (RR) individuals synthetic population disease given PM exposure","code":""},{"path":"/reference/gen_ap_rr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get relative risk for diseases given PM exposure — gen_ap_rr","text":"","code":"gen_ap_rr(pm_conc_pp)"},{"path":"/reference/gen_ap_rr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get relative risk for diseases given PM exposure — gen_ap_rr","text":"pm_conc_pp individual PM exposures person synthetic population","code":""},{"path":"/reference/gen_ap_rr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get relative risk for diseases given PM exposure — gen_ap_rr","text":"data frame relative risks per person disease scenario","code":""},{"path":"/reference/gen_ap_rr.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get relative risk for diseases given PM exposure — gen_ap_rr","text":"function performs following steps: minimum ages age group corresponding disease risks assigned individuals    synthetic population (added PM exposure levels) loop diseases related PM pollution: depending disease (disease different relative risks depending      age individual) loop disease specific age groups (just       one age group disease) set quantile value dose response curves extracted. running       constant mode, quantile usually set 0.5, .e. median dose response curves.       running sample mode, quantile can set sampled distribution       input parameters. loop scenarios: assign relative risk given disease, age group, quantile scenario         relevant people synthetic population calling AP_dose_response.R function","code":""},{"path":"/reference/gen_pa_rr.html","id":null,"dir":"Reference","previous_headings":"","what":"Get relative risk for diseases given mMETs — gen_pa_rr","title":"Get relative risk for diseases given mMETs — gen_pa_rr","text":"Computes relative risks (RR) individuals synthetic population disease given mMETs (PA exposure)","code":""},{"path":"/reference/gen_pa_rr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get relative risk for diseases given mMETs — gen_pa_rr","text":"","code":"gen_pa_rr(mmets_pp, conf_int = F)"},{"path":"/reference/gen_pa_rr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get relative risk for diseases given mMETs — gen_pa_rr","text":"mmets_pp individual mMETs","code":""},{"path":"/reference/gen_pa_rr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get relative risk for diseases given mMETs — gen_pa_rr","text":"data frame relative risks per person per disease","code":""},{"path":"/reference/gen_pa_rr.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get relative risk for diseases given mMETs — gen_pa_rr","text":"function performs following steps: loop diseases related physical activity levels: set quantile value dose response curves extracted. running       constant mode, quantile usually set 0.5, .e. median dose response curves.       running sample mode, quantile can set sampled distribution       input parameters. create one vector containing mMET values scenarios assign relative risk given disease quantile       given mMET values people synthetic population       scenarios calling drpa::dose_response function extract RR scenario vector containing RR scenarios confidence intervals required, also extract RR upper lower      confidence values scenario","code":""},{"path":"/reference/get_all_distances.html","id":null,"dir":"Reference","previous_headings":"","what":"Find population distances by mode for entire population — get_all_distances","title":"Find population distances by mode for entire population — get_all_distances","text":"Function find distances travelled age, sex, scenario mode entire population  rather just synthetic population.","code":""},{"path":"/reference/get_all_distances.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Find population distances by mode for entire population — get_all_distances","text":"","code":"get_all_distances(ithim_object)"},{"path":"/reference/get_all_distances.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Find population distances by mode for entire population — get_all_distances","text":"ithim_object list containing city specific information including synthetic trip set","code":""},{"path":"/reference/get_all_distances.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Find population distances by mode for entire population — get_all_distances","text":"ithim_object , additional total population distance mode scenario, distances injury pathway plus parameterised Poisson injury regression model","code":""},{"path":"/reference/get_all_distances.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Find population distances by mode for entire population — get_all_distances","text":"function performs following steps: generate distance duration matrices age, sex, mode scenario ithim_object$trip_scen_sets   synthetic population calling dist_dur_tbls.R function find total mode distances scenario scale distance travelled entire   population using demographic information city order scale distances age, sex, mode scenario entire population, proportion    distances travelled age, sex, mode scenario combination synthetic population total    distances mode scenario synthetic population found. total population distances mode    multiplied proportions find total population distances travelled mode    age sex category. distances_for_injury_function.R function called creates list inj_distances added   ithim_object containing following matrices: true_distances (population mode distances age sex walking modes car modes combined       bus drivers added relevant) injuries_list (list strike, casualty, age, sex mode distance combinations baseline       scenarios, used predict fatalities later model run) reg_model (parameterised Poisson injury regression model) injuries_for_model (baseline data containing injury counts casualty strike mode       combinations associated distance data)","code":""},{"path":"/reference/get_scenario_settings.html","id":null,"dir":"Reference","previous_headings":"","what":"Get values for mode share across distance categories and for max mode share scenario\r\n - CURRENTLY only used when calling summary_tables.Rmd — get_scenario_settings","title":"Get values for mode share across distance categories and for max mode share scenario\r\n - CURRENTLY only used when calling summary_tables.Rmd — get_scenario_settings","text":"Computes mode shares different distance categories maximum mode share specified mode types specified distance categories across specified  (stored) cities. Used max mode share scenario generation.","code":""},{"path":"/reference/get_scenario_settings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get values for mode share across distance categories and for max mode share scenario\r\n - CURRENTLY only used when calling summary_tables.Rmd — get_scenario_settings","text":"","code":"get_scenario_settings(   cities = c(\"accra\", \"bangalore\", \"belo_horizonte\", \"bogota\", \"buenos_aires\",     \"cape_town\", \"delhi\", \"mexico_city\", \"santiago\", \"sao_paulo\", \"vizag\"),   modes = c(\"pedestrian\", \"cycle\", \"car\", \"motorcycle\", \"bus\"),   distances = c(\"0-2 km\", \"2-6 km\", \"6+ km\"),   speeds = list(bus = 8.1, bus_driver = 8.1, minibus = 8.1, minibus_driver = 8.1, car =     13.8, car_driver = 13.8, taxi = 13.8, pedestrian = 2.5, walk_to_pt = 2.5, cycle =     7.2, motorcycle = 15.2, truck = 8.1, van = 13.8, subway = 18.1, rail = 21.9,     auto_rickshaw = 4, shared_auto = 13.8, shared_taxi = 13.8, cycle_rickshaw = 4, other     = 9.1) )"},{"path":"/reference/get_scenario_settings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get values for mode share across distance categories and for max mode share scenario\r\n - CURRENTLY only used when calling summary_tables.Rmd — get_scenario_settings","text":"cities cities use modes modes use distances distance categories use speeds named list mode speeds (applied cities)","code":""},{"path":"/reference/get_scenario_settings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get values for mode share across distance categories and for max mode share scenario\r\n - CURRENTLY only used when calling summary_tables.Rmd — get_scenario_settings","text":"data frame maximum proportions mode distance category","code":""},{"path":"/reference/get_scenario_settings.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get values for mode share across distance categories and for max mode share scenario\r\n - CURRENTLY only used when calling summary_tables.Rmd — get_scenario_settings","text":"function performs following steps: define minimum distances distance category loop pre-defined cities: read trip data get data correct format assign distance categories distance category pre-defined mode find proportional modal share       (distance category, proportion modes adds 100 rail trips exist, added proportion bus trips get one value       public transport find maximum mode shares mode distance category city print one table showing mode shares distance category","code":""},{"path":"/reference/get_synthetic_from_trips.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate synthetic population from trip data — get_synthetic_from_trips","title":"Generate synthetic population from trip data — get_synthetic_from_trips","text":"Sequence functions set synthetic population, synthetic trips, scenarios.","code":""},{"path":"/reference/get_synthetic_from_trips.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate synthetic population from trip data — get_synthetic_from_trips","text":"","code":"get_synthetic_from_trips()"},{"path":"/reference/get_synthetic_from_trips.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate synthetic population from trip data — get_synthetic_from_trips","text":"data frame synthetic trips scenarios","code":""},{"path":"/reference/get_synthetic_from_trips.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate synthetic population from trip data — get_synthetic_from_trips","text":"function performs following steps: columns TRIP_SET put correct order multiply trip distances, stage distances, durations day_to_week scalar    divide 7 get distances durations 'average' day week add bus_driver truck trips required (add_ghost_trips.R) add personal motorcycle trips needed (call appropriate function) add commercial motorcycle trips required (add_ghost_trips.R) build synthetic population creating data set contains (non-zero) participant     ids demographic information trip data set adds work leisure MMET   values calling create_synth_pop.R (non travel entries trip data set also removed) adds car driver trips required (add_ghost_trips.R) call ithim_setup_baseline_scenario.R function get baseline data correct format   creation different scenarios create required scenarios calling appropriate function add walk pt trips combine scenarios one dataframe calling    walk_to_pt_and_combine_scen.R function","code":""},{"path":"/reference/health_burden.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute health burden — health_burden","title":"Compute health burden — health_burden","text":"Compute health burden population scenarios given relative risks diseases","code":""},{"path":"/reference/health_burden.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute health burden — health_burden","text":"","code":"health_burden(ind_ap_pa, conf_int = F, combined_AP_PA = T)"},{"path":"/reference/health_burden.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute health burden — health_burden","text":"ind_ap_pa dataframe individuals' relative risks diseases conf_int=F logic: whether include confidence interval dose response relationships combined_AP_PA=T logic: whether combine two exposure pathways (AP PA) compute independently","code":""},{"path":"/reference/health_burden.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute health burden — health_burden","text":"list dataframes: one deaths per disease per demographic group scenario, likewise YLLs","code":""},{"path":"/reference/health_burden.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute health burden — health_burden","text":"function performs following steps: get demographic disease burden (subset Global Burden Disease dataset) data    correct formats join two datasets scale burden data CHRONIC_DISEASE_SCALAR account bias data split dataframe two dataframes, one deaths one     years life lost (YLLs) add demographic index (age sex category) dataframe containing    individual relative risk different diseases set reference scenarios iterate disease outcomes: define column names loop either 1 2 pathways depending whether PA AP affecting       disease whether AP PA pathways combined : extract relevant burden disease specific scenario YLLs deaths find sum relative risks (RR) specific disease age        sex category reference scenario loop non-reference scenarios: define column names find sum relative risks (RR) specific disease age          sex category non-reference scenario calculate PIF (potential impact fraction), .e proportional change          sum relative risks reference non-reference           scenario age sex category calculate health burden (deaths ylls) non-reference scenario          compared reference scenario multiplying current burden disease          PIF (combine_health_and_pif.R) confidence intervals required, loop upper lower confidence        interval limits calculate health burden deaths YLLs using        upper lower confidence relative risks. upper lower relative risk        values exist, use median value instead","code":""},{"path":"/reference/injuries_function_2.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict injuries — injuries_function_2","title":"Predict injuries — injuries_function_2","text":"Predict injuries baseline scenarios based Poisson regression model fitted  baseline fatality counts distances","code":""},{"path":"/reference/injuries_function_2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict injuries — injuries_function_2","text":"","code":"injuries_function_2(   true_distances,   injuries_list,   reg_model,   constant_mode = F )"},{"path":"/reference/injuries_function_2.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict injuries — injuries_function_2","text":"true_distances data frame containing population distances scenario injuries_list list dataframes set scenario specific information supply regression model prediction reg_model Poisson injury regression model constant_mode whether constant (vs sampling) mode","code":""},{"path":"/reference/injuries_function_2.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict injuries — injuries_function_2","text":"injuries2 - dataframe containing predicted fatality counts casualty mode age sex scenario, plus confidence interval limits constant mode whw_temp - list containing fatality predictions casualty strike mode pair split whw nov matrices scenario. Upper lower confidence interval predictions also included constant mode","code":""},{"path":"/reference/injuries_function_2.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Predict injuries — injuries_function_2","text":"function uses Poisson regression model built distances_for_injury_function.R predict fatality counts Baseline scenarios. performs following steps: create injuries data frame containing distances travelled mode, age, sex scenario predict fatalities strike casualty mode combination, age sex category   scenario (incl Baseline). sample mode set 'constant' ('sample'),    also predict upper lower confidence interval boundaries create whw_temp list containing total predicted fatality counts casualty   strike mode pair scenario split whw nov matrices ,    constant mode also give upper lower confidence interval limit predictions create injuries2 data frame containing total predicted fatality counts    casualty mode age sex scenario. dataframe also   contains total death per age sex category , constant mode    upper lower total death predictions confidence interval.","code":""},{"path":"/reference/injury_death_to_yll.html","id":null,"dir":"Reference","previous_headings":"","what":"Map injury death burden to YLL (years of life lost) burden — injury_death_to_yll","title":"Map injury death burden to YLL (years of life lost) burden — injury_death_to_yll","text":"Calculate YLL burden death burden injury based ratio GBD data.","code":""},{"path":"/reference/injury_death_to_yll.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Map injury death burden to YLL (years of life lost) burden — injury_death_to_yll","text":"","code":"injury_death_to_yll(injuries)"},{"path":"/reference/injury_death_to_yll.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Map injury death burden to YLL (years of life lost) burden — injury_death_to_yll","text":"injuries data frame injury deaths age sex category scenario incl. baseline","code":""},{"path":"/reference/injury_death_to_yll.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Map injury death burden to YLL (years of life lost) burden — injury_death_to_yll","text":"list injury deaths YLLs (given differences reference scenario) plus values reference scenario","code":""},{"path":"/reference/injury_death_to_yll.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Map injury death burden to YLL (years of life lost) burden — injury_death_to_yll","text":"function performs following steps: join estimated injury deaths global burden disease (GBD) injury data age sex multiply estimated injury deaths yll injury death ratio GBD data predict YLL    estimated injury deaths extract create matrices deaths ylls one column scenario create dataframe ylls deaths reference scenario create dataframe B showing differences deaths yll non-reference    scenario reference scenario confidence intervals required:  create dataframe ylls deaths reference scenario using lower upper       relative risk boundary values create dataframe showing differences deaths yll non-reference      scenario reference scenario using lower upper relative      risk boundary values add confidence upper lower interval boundary values two output dataframes B","code":""},{"path":"/reference/ithim_calculation_sequence.html","id":null,"dir":"Reference","previous_headings":"","what":"Cascade of computations that form ITHIM-Global — ithim_calculation_sequence","title":"Cascade of computations that form ITHIM-Global — ithim_calculation_sequence","text":"Ordered set computations part ITHIM-Global calculates required output parameters","code":""},{"path":"/reference/ithim_calculation_sequence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cascade of computations that form ITHIM-Global — ithim_calculation_sequence","text":"","code":"ithim_calculation_sequence(ithim_object, seed = 1)"},{"path":"/reference/ithim_calculation_sequence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Cascade of computations that form ITHIM-Global — ithim_calculation_sequence","text":"ithim_object name disease seed","code":""},{"path":"/reference/ithim_calculation_sequence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Cascade of computations that form ITHIM-Global — ithim_calculation_sequence","text":"ithim_object - list items making ithim result","code":""},{"path":"/reference/ithim_calculation_sequence.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Cascade of computations that form ITHIM-Global — ithim_calculation_sequence","text":"function performs following steps: extract lists variables ithim_object list air pollution pathway: calculate PM2.5 exposure person synthetic population       PM2.5 emissions mode scenario (scenario_pm_calculations.R) calculate CO2 emissions mode scenario (scenario_co2_calculations.R) assign relative risk person synthetic population disease      related PM pollution scenario based individual PM exposure       levels (gen_ap_rr.R) physical activity pathway: calculate total mMETs person synthetic population (total_mmet.R) assign relative risk person synthetic population disease      related physical activity levels scenario based individual mMET      values (gen_pa_rr.R) physical activity air pollution combined: combine PA AP datasets joining two datasets. disease affected       PA AP calculate joined relative risk multiplying PA AP      relative risks (combined_rr_ap_pa.R) calculate health burden (Yll deaths) disease age sex      category (health_burden.R): calculate health burden (Yll deaths) disease age         sex category. Combine AP PA pathways diseases affected        AP PA running constant mode also calculate health burden        AP PA pathways separately injury pathway: estimate injury deaths baseline scenario age sex category,        also estimate total injury deaths counts -hit---vehicle matrices       casualty (strike) mode baseline scenario (injuries_function2.R) running constant mode include upper lower confidence intervals calculate years life lost injury deaths (injury_death_to_yll.R) combine pathways using outputs 3. 4.: combine AP, PA injury health burden data ylls deaths (join_hb_and_injury.R)      diseases, injuries scenarios","code":""},{"path":"/reference/ithim_load_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Load data for model and prepare input data for model — ithim_load_data","title":"Load data for model and prepare input data for model — ithim_load_data","text":"Loads processes data files using city specific local data global data. Processes input data ready ITHIM-Global model run. Writes objects global environment.","code":""},{"path":"/reference/ithim_load_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load data for model and prepare input data for model — ithim_load_data","text":"","code":"ithim_load_data(   speeds = list(bus = 8.1, bus_driver = 8.1, minibus = 8.1, minibus_driver = 8.1, car =     13.8, car_driver = 13.8, taxi = 13.8, pedestrian = 2.5, walk_to_pt = 2.5, cycle =     7.2, motorcycle = 15.2, truck = 8.1, van = 13.8, subway = 18.1, rail = 21.9,     auto_rickshaw = 4, shared_auto = 13.8, shared_taxi = 13.8, cycle_rickshaw = 4, other     = 9.1) )"},{"path":"/reference/ithim_load_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load data for model and prepare input data for model — ithim_load_data","text":"speeds named list mode speeds","code":""},{"path":"/reference/ithim_load_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Load data for model and prepare input data for model — ithim_load_data","text":"function performs following steps load process input data: find path ithimr package global local data can found check whether drpa package installed read Global Burden Disease data country read city specific trip data:  set missing stage trip information known stage trip information,       e.g. stage duration missing trip duration known set stage duration trip duration ensure stage modes trip modes consist set keywords, replace mode names key      words, e.g. replace 'train' 'rail' remove trips age sex 'NA' Rename pedestrian stage modes non-pedestrian trips 'pedestrian' 'walk_to_pt' remove walk_to_pt stages belong either rail bus trip modes (call get_scenario_settings() using max_mode_share_scenario) read local Global Burden Disease (GBD) data: combine various head neck cancers, combine myeloid leukemia diseases, combine respiratory diseases level 2 adjust rectum cancer combined colon rectum cancer burden read local demographic data: find / re-define max min ages based max min ages trip data,       demographic data max min ages considered model remove population data outside max min ages find proportion total population considered model total population get age-category details population data, ages max min ages removed extract diseases plus road injures GBD data, update format max min ages entry compute proportion injuries age range considered model GBD data,   proportion applied injury datasets without age sex information remove ages outside age ranges considered model GBD_data create burden_of_disease dataframe GBD_data changing layout GBD_data: add city specific population data add country specific disease rate GBD data, ie. proportion number people       country disease population country age sex category using country disease rate calculate city population affected disease using burden_of_disease data (now called DISEASE_BURDEN), calculate ratio   YLL death age sex category road_injuries data read city specific road injury data: Set 'weight' column unique number years injury data exists (column already exist) strike mode equals casualty mode, set strike mode 'nov' (vehicle) call set_injury_contingency.R function set tables WHW (hit ) NOV (vehicle) fatalities","code":""},{"path":"/reference/ithim_setup_baseline_scenario.html","id":null,"dir":"Reference","previous_headings":"","what":"Set up baseline scenario data frame — ithim_setup_baseline_scenario","title":"Set up baseline scenario data frame — ithim_setup_baseline_scenario","text":"Set baseline scenario ready scenario development","code":""},{"path":"/reference/ithim_setup_baseline_scenario.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set up baseline scenario data frame — ithim_setup_baseline_scenario","text":"","code":"ithim_setup_baseline_scenario(trip_set)"},{"path":"/reference/ithim_setup_baseline_scenario.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set up baseline scenario data frame — ithim_setup_baseline_scenario","text":"trip_set data frame trips","code":""},{"path":"/reference/ithim_setup_baseline_scenario.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set up baseline scenario data frame — ithim_setup_baseline_scenario","text":"trip_set baseline scenario","code":""},{"path":"/reference/ithim_setup_baseline_scenario.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Set up baseline scenario data frame — ithim_setup_baseline_scenario","text":"function performs following steps trip set data: add distance categories add scenario='baseline' column","code":""},{"path":"/reference/ithim_setup_parameters.html","id":null,"dir":"Reference","previous_headings":"","what":"Set parameters for ITHIM-Global run — ithim_setup_parameters","title":"Set parameters for ITHIM-Global run — ithim_setup_parameters","text":"Function set parameters either using constant value sampling pre-defined function","code":""},{"path":"/reference/ithim_setup_parameters.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set parameters for ITHIM-Global run — ithim_setup_parameters","text":"","code":"ithim_setup_parameters(   NSAMPLES = 1,   BUS_WALK_TIME = 16,   RAIL_WALK_TIME = 12.5,   CYCLING_MET = 6.8,   WALKING_MET = 3.5,   PASSENGER_MET = 1.3,   CAR_DRIVER_MET = 2.5,   MOTORCYCLIST_MET = 2.8,   SEDENTARY_ACTIVITY_MET = 1.3,   LIGHT_ACTIVITY_MET = 1.3,   MODERATE_PA_MET = 4,   VIGOROUS_PA_MET = 8,   PM_CONC_BASE = 12.69,   PM_TRANS_SHARE = 0.42,   PA_DOSE_RESPONSE_QUANTILE = F,   AP_DOSE_RESPONSE_QUANTILE = F,   BACKGROUND_PA_SCALAR = 1,   BACKGROUND_PA_CONFIDENCE = 1,   INJURY_REPORTING_RATE = 1,   CHRONIC_DISEASE_SCALAR = 1,   DAY_TO_WEEK_TRAVEL_SCALAR = 7,   SIN_EXPONENT_SUM = 2,   CASUALTY_EXPONENT_FRACTION = 0.5,   SIN_EXPONENT_SUM_NOV = 1,   SIN_EXPONENT_SUM_CYCLE = 2,   CASUALTY_EXPONENT_FRACTION_CYCLE = 0.5,   SIN_EXPONENT_SUM_PED = 2,   CASUALTY_EXPONENT_FRACTION_PED = 0.5,   SIN_EXPONENT_SUM_VEH = 2,   CASUALTY_EXPONENT_FRACTION_VEH = 0.5,   BUS_TO_PASSENGER_RATIO = 0.0389,   CAR_OCCUPANCY_RATIO = 0.625,   TRUCK_TO_CAR_RATIO = 0.3,   FLEET_TO_MOTORCYCLE_RATIO = 0.441,   PROPORTION_MOTORCYCLE_TRIPS = 0,   PM_EMISSION_INVENTORY_CONFIDENCE = 1,   CO2_EMISSION_INVENTORY_CONFIDENCE = 1,   DISTANCE_SCALAR_CAR_TAXI = 1,   DISTANCE_SCALAR_WALKING = 1,   DISTANCE_SCALAR_PT = 1,   DISTANCE_SCALAR_CYCLING = 1,   DISTANCE_SCALAR_MOTORCYCLE = 1,   BUS_DRIVER_PROP_MALE = 0.98,   BUS_DRIVER_MALE_AGERANGE = \"19, 65\",   BUS_DRIVER_FEMALE_AGERANGE = \"19, 65\",   TRUCK_DRIVER_PROP_MALE = 0.98,   TRUCK_DRIVER_MALE_AGERANGE = \"18, 65\",   TRUCK_DRIVER_FEMALE_AGERANGE = \"18, 65\",   COMMERCIAL_MBIKE_PROP_MALE = 0.99,   COMMERCIAL_MBIKE_MALE_AGERANGE = \"18, 65\",   COMMERCIAL_MBIKE_FEMALE_AGERANGE = \"18, 65\",   MINIMUM_PT_TIME = 3,   MODERATE_PA_CONTRIBUTION = 0.5,   CALL_INDIVIDUAL_SIN = F,   SCENARIO_NAME = \"GLOBAL\",   SCENARIO_INCREASE = 0.05 )"},{"path":"/reference/ithim_setup_parameters.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set parameters for ITHIM-Global run — ithim_setup_parameters","text":"NSAMPLES constant integer: number samples take BUS_WALK_TIME lognormal parameter: duration walk bus stage RAIL_WALK_TIME lognormal parameter: duration walk rail stage CYCLING_MET lognormal parameter: METs cycling WALKING_MET lognormal parameter: METs walking PASSENGER_MET lognormal parameter: MET value associated passenger public transport CAR_DRIVER_MET lognormal parameter: MET value associated car driver MOTORCYCLIST_MET lognormal parameter: MET value associated motorcyclist SEDENTARY_ACTIVITY_MET lognormal parameter: MET value associated sedentary activity LIGHT_ACTIVITY_MET lognormal parameter: MET value associated light activity MODERATE_PA_MET lognormal parameter: MET value associated moderate activity VIGOROUS_PA_MET lognormal parameter: MET value associated vigorous activity PM_CONC_BASE lognormal parameter: background PM2.5 concentration PM_TRANS_SHARE beta parameter: fraction background PM2.5 attributable transport PA_DOSE_RESPONSE_QUANTILE logic: whether sample physical activity relative risk dose response functions AP_DOSE_RESPONSE_QUANTILE logic: whether sample air pollution relative risk dose response functions BACKGROUND_PA_SCALAR lognormal parameter: reporting scalar physical activity correct bias data BACKGROUND_PA_CONFIDENCE beta parameter: confidence accuracy zero non-travel physical activity levels INJURY_REPORTING_RATE lognormal parameter: rate injury fatality reporting CHRONIC_DISEASE_SCALAR lognormal parameter: scalar background disease rates adjust bias GBD data DAY_TO_WEEK_TRAVEL_SCALAR beta parameter: rate scaling travel one day one week - CURRENTLY used constant (using beta parameter need considerations) SIN_EXPONENT_SUM lognormal parameter: linearity injuries respect two modes. SIN_EXPONENT_SUM=2 means safety numbers CASUALTY_EXPONENT_FRACTION beta parameter: casualty exponent contribution SIN_EXPONENT_SUM SIN_EXPONENT_SUM_NOV lognormal parameter: linearity injuries respect two modes strike mode = NOV. SIN_EXPONENT_SUM=2 means safety numbers SIN_EXPONENT_SUM_CYCLE lognormal parameter: linearity injuries respect two modes victim mode = cycle. SIN_EXPONENT_SUM=2 means safety numbers CASUALTY_EXPONENT_FRACTION_CYCLE beta parameter: casualty exponent contribution SIN_EXPONENT_SUM_CYCLE  victim mode = cycle SIN_EXPONENT_SUM_PED lognormal parameter: linearity injuries respect two modes  victim mode = pedestrian. SIN_EXPONENT_SUM=2 means safety numbers CASUALTY_EXPONENT_FRACTION_PED beta parameter: casualty exponent contribution SIN_EXPONENT_SUM_PED victim mode = pedestrian SIN_EXPONENT_SUM_VEH lognormal parameter: linearity injuries respect two modes victim mode = vehicle. SIN_EXPONENT_SUM=2 means safety numbers CASUALTY_EXPONENT_FRACTION_VEH beta parameter: casualty exponent contribution SIN_EXPONENT_SUM_VEH victim mode = vehicle BUS_TO_PASSENGER_RATIO beta parameter: number buses per passenger CAR_OCCUPANCY_RATIO beta parameter: number people per car (including driver) TRUCK_TO_CAR_RATIO beta parameter: proportion truck car vehicle km travelled FLEET_TO_MOTORCYCLE_RATIO beta parameter: amount motorcycle trips added commercial trips PROPORTION_MOTORCYCLE_TRIPS beta parameter: proportion trips added personal motorcycle trips PM_EMISSION_INVENTORY_CONFIDENCE beta parameter: confidence accuracy PM emission inventory CO2_EMISSION_INVENTORY_CONFIDENCE beta parameter: confidence accuracy CO2 emission inventory DISTANCE_SCALAR_CAR_TAXI lognormal parameter: scalar adjust bias car distance travelled DISTANCE_SCALAR_WALKING lognormal parameter: scalar adjust bias walking distance travelled DISTANCE_SCALAR_PT lognormal parameter: scalar adjust bias PT distance travelled DISTANCE_SCALAR_CYCLING lognormal parameter: scalar adjust bias cycling distance travelled DISTANCE_SCALAR_MOTORCYCLE lognormal parameter: scalar adjust biase motorcycle distance travelled BUS_DRIVER_PROP_MALE scalar: proportion bus drivers male BUS_DRIVER_MALE_AGERANGE character: age range male bus drivers BUS_DRIVER_FEMALE_AGERANGE character: age range female bus drivers TRUCK_DRIVER_PROP_MALE scalar: proportion truck drivers male TRUCK_DRIVER_MALE_AGERANGE character: age range male truck drivers TRUCK_DRIVER_FEMALE_AGERANGE character: age range female truck drivers COMMERCIAL_MBIKE_PROP_MALE scalar: proportion commercial motorcycle drivers male COMMERCIAL_MBIKE_MALE_AGERANGE character: age range male commercial motorcycle drivers COMMERCIAL_MBIKE_FEMALE_AGERANGE character: age range female commercial motorcycle drivers MINIMUM_PT_TIME scalar: minimum time person spends public transport MODERATE_PA_CONTRIBUTION scalar: proportion contribution moderate PA Leisure MVPA CALL_INDIVIDUAL_SIN logic: whether call safety number coefficients individual vehicles use coefficients modes","code":""},{"path":"/reference/ithim_setup_parameters.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set parameters for ITHIM-Global run — ithim_setup_parameters","text":"list samples uncertain parameters","code":""},{"path":"/reference/ithim_setup_parameters.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Set parameters for ITHIM-Global run — ithim_setup_parameters","text":"input parameters two options: set constant, sampled specified distribution. parameter given argument length 1 2.  length 1, constant, set global environment.  length 2, distribution defined sampled NSAMPLE times. exceptions, listed . function performs following steps: set input parameters global environment (sampling function called, overwritten) loop potential variables lognormal distribution sample distribution   required loop potential variables beta distribution sample distribution   required BACKGROUND_PA_CONFIDENCE<1 add BACKGROUND_PA_ZEROS parameters PM_EMISSION_INVENTORY_CONFIDENCE<1, sample PM inventory values    using Dirichlet distribution parameterised gamma random variables CO2_EMISSION_INVENTORY_CONFIDENCE<1, sample CO2 inventory values    using Dirichlet distribution parameterised gamma random variables PA_DOSE_RESPONSE_QUANTILE == T, find diseases related physical activity   levels assign quantile sampling uniform distribution 0 1 AP_DOSE_RESPONSE_QUANTILE == T, find diseases related air pollution levels   assign quantile sampling uniform distribution 0 1 bottom function, dirichlet_pointiness() function defined  parameterises Dirichlet distributions PM CO2 emission inventories.","code":""},{"path":"/reference/ithim_uncertainty.html","id":null,"dir":"Reference","previous_headings":"","what":"Sampling routine for running ITHIM with uncertainty — ithim_uncertainty","title":"Sampling routine for running ITHIM with uncertainty — ithim_uncertainty","text":"Sets sampled parameters global environment calls ITHIM routine","code":""},{"path":"/reference/ithim_uncertainty.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sampling routine for running ITHIM with uncertainty — ithim_uncertainty","text":"","code":"ithim_uncertainty(ithim_object, seed = 1)"},{"path":"/reference/ithim_uncertainty.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sampling routine for running ITHIM with uncertainty — ithim_uncertainty","text":"ithim_object list necessary inputs, including parameters seed sample take","code":""},{"path":"/reference/ithim_uncertainty.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sampling routine for running ITHIM with uncertainty — ithim_uncertainty","text":"list ITHIM outcomes","code":""},{"path":"/reference/ithim_uncertainty.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Sampling routine for running ITHIM with uncertainty — ithim_uncertainty","text":"function works performing following steps: extract ithim_object list entries extract sampled parameters stored ithim_object call set_vehicle_inventory.R update emissions     emission parameters sampled distribution call get_synthetic_from_trips.R update synthetic trips synthetic population    relevant input parameters sampled distribution call get_all_distances.R recalculate distances relevant input parameters   sampled distribution run ITHIM-Global model calling ithim_calculation_sequence.R","code":""},{"path":"/reference/join_hb_and_injury.html","id":null,"dir":"Reference","previous_headings":"","what":"Join disease health burden and injury data — join_hb_and_injury","title":"Join disease health burden and injury data — join_hb_and_injury","text":"Join two data frames health burden: disease, road-traffic injury","code":""},{"path":"/reference/join_hb_and_injury.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Join disease health burden and injury data — join_hb_and_injury","text":"","code":"join_hb_and_injury(ind_ap_pa, inj)"},{"path":"/reference/join_hb_and_injury.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Join disease health burden and injury data — join_hb_and_injury","text":"ind_ap_pa list (deaths, YLLs) data frames demographic groups' burdens diseases inj list (deaths, YLLs) data frames demographic groups' burdens road-traffic injury","code":""},{"path":"/reference/join_hb_and_injury.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Join disease health burden and injury data — join_hb_and_injury","text":"list dataframes: one deaths per cause per demographic group, likewise YLLs","code":""},{"path":"/reference/join_hb_and_injury.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Join disease health burden and injury data — join_hb_and_injury","text":"function performs following steps: extract yll deaths data AP PA pathways extract yll deaths data injury data create one dataframe yll one deaths containing AP, PA injury data","code":""},{"path":"/reference/run_ithim.html","id":null,"dir":"Reference","previous_headings":"","what":"Wrapper for running ITHIM — run_ithim","title":"Wrapper for running ITHIM — run_ithim","text":"Switch either calculate health burden using constant input parameter values sample distributions first","code":""},{"path":"/reference/run_ithim.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Wrapper for running ITHIM — run_ithim","text":"","code":"run_ithim(ithim_object, seed = 1)"},{"path":"/reference/run_ithim.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Wrapper for running ITHIM — run_ithim","text":"ithim_object list input data needed calculate health burden seed","code":""},{"path":"/reference/run_ithim.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Wrapper for running ITHIM — run_ithim","text":"ithim_object list items giving input data output results","code":""},{"path":"/reference/run_ithim.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Wrapper for running ITHIM — run_ithim","text":"function works creating switch run computation calling  ithim_calculation_sequence() directly, divert sampling case ithim_uncertainty.R first extracts sampled parameters calls ithim_calculation_sequence().","code":""},{"path":"/reference/run_ithim_setup.html","id":null,"dir":"Reference","previous_headings":"","what":"Run the set up scripts for ITHIM — run_ithim_setup","title":"Run the set up scripts for ITHIM — run_ithim_setup","text":"Sets basic ITHIM object onward calculation. Data loading, processing harmonisation. Setting global values.","code":""},{"path":"/reference/run_ithim_setup.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run the set up scripts for ITHIM — run_ithim_setup","text":"","code":"run_ithim_setup(   seed = 1,   CITY = \"bogota\",   speeds = NULL,   PM_emission_inventory = NULL,   CO2_emission_inventory = NULL,   DIST_CAT = c(\"0-2 km\", \"2-6 km\", \"6+ km\"),   AGE_RANGE = c(15, 69),   ADD_WALK_TO_PT_TRIPS = T,   ADD_BUS_DRIVERS = T,   ADD_CAR_DRIVERS = T,   ADD_TRUCK_DRIVERS = T,   ADD_MOTORCYCLE_FLEET = T,   ADD_PERSONAL_MOTORCYCLE_TRIPS = \"no\",   REFERENCE_SCENARIO = \"baseline\",   PATH_TO_LOCAL_DATA = NULL,   NSAMPLES = 1,   BUS_WALK_TIME = 16,   RAIL_WALK_TIME = 12.5,   CYCLING_MET = 6.8,   WALKING_MET = 3.5,   PASSENGER_MET = 1.3,   CAR_DRIVER_MET = 2.5,   MOTORCYCLIST_MET = 2.8,   SEDENTARY_ACTIVITY_MET = 1.3,   LIGHT_ACTIVITY_MET = 1.3,   MODERATE_PA_MET = 4,   VIGOROUS_PA_MET = 8,   PM_CONC_BASE = 12.69,   PM_TRANS_SHARE = 0.42,   PA_DOSE_RESPONSE_QUANTILE = F,   AP_DOSE_RESPONSE_QUANTILE = F,   BACKGROUND_PA_SCALAR = 1,   BACKGROUND_PA_CONFIDENCE = 1,   INJURY_REPORTING_RATE = 1,   CHRONIC_DISEASE_SCALAR = 1,   DAY_TO_WEEK_TRAVEL_SCALAR = 7,   SIN_EXPONENT_SUM = 2,   CASUALTY_EXPONENT_FRACTION = 0.5,   SIN_EXPONENT_SUM_NOV = 1,   SIN_EXPONENT_SUM_CYCLE = 2,   CASUALTY_EXPONENT_FRACTION_CYCLE = 0.5,   SIN_EXPONENT_SUM_PED = 2,   CASUALTY_EXPONENT_FRACTION_PED = 0.5,   SIN_EXPONENT_SUM_VEH = 2,   CASUALTY_EXPONENT_FRACTION_VEH = 0.5,   BUS_TO_PASSENGER_RATIO = 0.0389,   CAR_OCCUPANCY_RATIO = 0.625,   TRUCK_TO_CAR_RATIO = 0.3,   FLEET_TO_MOTORCYCLE_RATIO = 0.441,   PROPORTION_MOTORCYCLE_TRIPS = 0,   PM_EMISSION_INVENTORY_CONFIDENCE = 1,   CO2_EMISSION_INVENTORY_CONFIDENCE = 1,   DISTANCE_SCALAR_CAR_TAXI = 1,   DISTANCE_SCALAR_WALKING = 1,   DISTANCE_SCALAR_PT = 1,   DISTANCE_SCALAR_CYCLING = 1,   DISTANCE_SCALAR_MOTORCYCLE = 1,   BUS_DRIVER_PROP_MALE = 0.98,   BUS_DRIVER_MALE_AGERANGE = \"19, 65\",   BUS_DRIVER_FEMALE_AGERANGE = \"19, 65\",   TRUCK_DRIVER_PROP_MALE = 0.98,   TRUCK_DRIVER_MALE_AGERANGE = \"18, 65\",   TRUCK_DRIVER_FEMALE_AGERANGE = \"18, 65\",   COMMERCIAL_MBIKE_PROP_MALE = 0.99,   COMMERCIAL_MBIKE_MALE_AGERANGE = \"18, 65\",   COMMERCIAL_MBIKE_FEMALE_AGERANGE = \"18, 65\",   MINIMUM_PT_TIME = 3,   MODERATE_PA_CONTRIBUTION = 0.5,   CALL_INDIVIDUAL_SIN = F,   SCENARIO_NAME = \"GLOBAL\",   SCENARIO_INCREASE = 0.05 )"},{"path":"/reference/run_ithim_setup.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run the set up scripts for ITHIM — run_ithim_setup","text":"seed set seed get results sampling distribution CITY name city, name directory containing city data files speeds named list mode speeds PM_emission_inventory named list mode PM emissions CO2_emission_inventory named list CO2 mode emissions DIST_CAT vector string distance categories form '0-6'. (unit assumed trip set related speed values, usually km) AGE_RANGE vector minimum maximum ages include ADD_WALK_TO_PT_TRIPS logic: whether add short walks PT trips ADD_BUS_DRIVERS logic: whether add bus drivers ADD_CAR_DRIVERS logic: whether find add distance travelled individual cars, denoted car drivers ADD_TRUCK_DRIVERS logic: whether add truck drivers ADD_MOTORCYCLE_FLEET logic: whether add additional commercial motorcycle fleet ghost trips ADD_PERSONAL_MOTORCYCLE_TRIPS character: '' add personal motorcycle trips otherwise set geographic region defines set-motorcycle trips added REFERENCE_SCENARIO scenario forms reference health comparison PATH_TO_LOCAL_DATA path CITY directory, using package NSAMPLES constant integer: number samples take BUS_WALK_TIME lognormal parameter: duration walk bus stage RAIL_WALK_TIME lognormal parameter: duration walk rail stage CYCLING_MET lognormal parameter: METs cycling WALKING_MET lognormal parameter: METs walking PASSENGER_MET lognormal parameter: MET value associated passenger public transport CAR_DRIVER_MET lognormal parameter: MET value associated car driver MOTORCYCLIST_MET lognormal parameter: MET value associated motorcyclist SEDENTARY_ACTIVITY_MET lognormal parameter: MET value associated sedentary activity LIGHT_ACTIVITY_MET lognormal parameter: MET value associated light activity MODERATE_PA_MET lognormal parameter: MET value associated moderate activity VIGOROUS_PA_MET lognormal parameter: MET value associated vigorous activity PM_CONC_BASE lognormal parameter: background PM2.5 concentration PM_TRANS_SHARE beta parameter: fraction background PM2.5 attributable transport PA_DOSE_RESPONSE_QUANTILE logic: whether sample physical activity relative risk dose response functions AP_DOSE_RESPONSE_QUANTILE logic: whether sample air pollution relative risk dose response functions BACKGROUND_PA_SCALAR lognormal parameter: reporting scalar physical activity correct bias data BACKGROUND_PA_CONFIDENCE beta parameter: confidence accuracy zero non-travel physical activity levels INJURY_REPORTING_RATE lognormal parameter: rate injury fatality reporting CHRONIC_DISEASE_SCALAR lognormal parameter: scalar background disease rates adjust bias GBD data DAY_TO_WEEK_TRAVEL_SCALAR beta parameter: rate scaling travel one day one week - CURRENTLY used constant (using beta parameter need considerations) SIN_EXPONENT_SUM lognormal parameter: linearity injuries respect two modes. SIN_EXPONENT_SUM=2 means safety numbers CASUALTY_EXPONENT_FRACTION beta parameter: casualty exponent contribution SIN_EXPONENT_SUM SIN_EXPONENT_SUM_NOV lognormal parameter: linearity injuries respect two modes strike mode = NOV. SIN_EXPONENT_SUM=2 means safety numbers SIN_EXPONENT_SUM_CYCLE lognormal parameter: linearity injuries respect two modes victim mode = cycle. SIN_EXPONENT_SUM=2 means safety numbers CASUALTY_EXPONENT_FRACTION_CYCLE beta parameter: casualty exponent contribution SIN_EXPONENT_SUM_CYCLE  victim mode = cycle SIN_EXPONENT_SUM_PED lognormal parameter: linearity injuries respect two modes  victim mode = pedestrian. SIN_EXPONENT_SUM=2 means safety numbers CASUALTY_EXPONENT_FRACTION_PED beta parameter: casualty exponent contribution SIN_EXPONENT_SUM_PED victim mode = pedestrian SIN_EXPONENT_SUM_VEH lognormal parameter: linearity injuries respect two modes victim mode = vehicle. SIN_EXPONENT_SUM=2 means safety numbers CASUALTY_EXPONENT_FRACTION_VEH beta parameter: casualty exponent contribution SIN_EXPONENT_SUM_VEH victim mode = vehicle BUS_TO_PASSENGER_RATIO beta parameter: number buses per passenger CAR_OCCUPANCY_RATIO beta parameter: number people per car (including driver) TRUCK_TO_CAR_RATIO beta parameter: proportion truck car vehicle km travelled FLEET_TO_MOTORCYCLE_RATIO beta parameter: amount motorcycle trips added commercial trips PROPORTION_MOTORCYCLE_TRIPS beta parameter: proportion trips added personal motorcycle trips PM_EMISSION_INVENTORY_CONFIDENCE beta parameter: confidence accuracy PM emission inventory CO2_EMISSION_INVENTORY_CONFIDENCE beta parameter: confidence accuracy CO2 emission inventory DISTANCE_SCALAR_CAR_TAXI lognormal parameter: scalar adjust bias car distance travelled DISTANCE_SCALAR_WALKING lognormal parameter: scalar adjust bias walking distance travelled DISTANCE_SCALAR_PT lognormal parameter: scalar adjust bias PT distance travelled DISTANCE_SCALAR_CYCLING lognormal parameter: scalar adjust bias cycling distance travelled DISTANCE_SCALAR_MOTORCYCLE lognormal parameter: scalar adjust biase motorcycle distance travelled BUS_DRIVER_PROP_MALE scalar: proportion bus drivers male BUS_DRIVER_MALE_AGERANGE character: age range male bus drivers BUS_DRIVER_FEMALE_AGERANGE character: age range female bus drivers TRUCK_DRIVER_PROP_MALE scalar: proportion truck drivers male TRUCK_DRIVER_MALE_AGERANGE character: age range male truck drivers TRUCK_DRIVER_FEMALE_AGERANGE character: age range female truck drivers COMMERCIAL_MBIKE_PROP_MALE scalar: proportion commercial motorcycle drivers male COMMERCIAL_MBIKE_MALE_AGERANGE character: age range male commercial motorcycle drivers COMMERCIAL_MBIKE_FEMALE_AGERANGE character: age range female commercial motorcycle drivers MINIMUM_PT_TIME scalar: minimum time person spends public transport MODERATE_PA_CONTRIBUTION scalar: proportion contribution moderate PA Leisure MVPA CALL_INDIVIDUAL_SIN logic: whether call safety number coefficients individual vehicles use coefficients modes SCENARIO_NAME name scenarios (currently supports: TEST_WALK_SCENARIO, TEST_CYCLE_SCENARIO,  MAX_MODE_SHARE_SCENARIO, LATAM, GLOBAL, AFRICA_INDIA, BOGOTA) SCENARIO_INCREASE increase given mode scenario (currently used GLOBAL, BOGOTA, LATAM AFRICA_INDIA scenarios)","code":""},{"path":"/reference/run_ithim_setup.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run the set up scripts for ITHIM — run_ithim_setup","text":"ithim_object list objects onward use.","code":""},{"path":"/reference/run_ithim_setup.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Run the set up scripts for ITHIM — run_ithim_setup","text":"function used read various input files parameters  process harmonise data ready health impact assessment.  Input Parameters two options: set constant sampled  pre-specified distribution. parameters given  argument length 1 2. length 1, parameter usually used  constant. parameter length 2, distribution defined  sampled NSAMPLE times. function performs following steps: check whether valid scenario name called, get error message set various input parameters global parameters find path local data define fixed parameters air pollution inhalation define mode speeds: set default speeds various modes update default speeds city specific mode speeds       given input parameters ensure similar modes speed assigned set-dataframe modes speeds define PM emissions inventory define default emission values update default values city specific values given input parameters define CO2 emissions inventory set default emission values update default values city specific values given input parameters load processe data files calling ithim_load_data.R call ithim_setup_parameters.R set given input parameters global   environment running constant mode obtain NSAMPLE samples   given distributions input parameters running sample mode set flags cause certain parts model called later stage  (ithim_uncertainty.R) certain input parameters sampled distribution call complete_trip_distance_duration.R add missing stage distance   information trip data none corresponding input parameters sampled distribution,    call set_vehicle_inventory.R create dataframe mode specific speed,    distance emission information none corresponding input parameters sampled distribution,   call get_synthetic_from_trips set synthetic trips synthetic population none corresponding input parameters sampled distribution,   call get_all_distances.R calculate trip distances","code":""},{"path":"/reference/scale_trip_distances.html","id":null,"dir":"Reference","previous_headings":"","what":"Scale trip distances — scale_trip_distances","title":"Scale trip distances — scale_trip_distances","text":"Applies mode-specific distance scalars trips","code":""},{"path":"/reference/scale_trip_distances.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scale trip distances — scale_trip_distances","text":"","code":"scale_trip_distances(trips)"},{"path":"/reference/scale_trip_distances.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scale trip distances — scale_trip_distances","text":"trips data frame, trips scenarios","code":""},{"path":"/reference/scale_trip_distances.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scale trip distances — scale_trip_distances","text":"data frame, trips scenarios scaled distances","code":""},{"path":"/reference/scale_trip_distances.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Scale trip distances — scale_trip_distances","text":"function used multiply trip stages belonging certain mode city specific scalar. Note walk pt stages counted public transport stages multiplied DISTANCE_SCALAR_PT function performs following steps: define car public transport modes multiply stage distances stage durations corresponding distance scalars","code":""},{"path":"/reference/scenario_co2_calculations.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate total CO2 exposure per mode and scenario — scenario_co2_calculations","title":"Calculate total CO2 exposure per mode and scenario — scenario_co2_calculations","text":"Calculate total CO2 exposure mode scenario based CO2 emissions inventory","code":""},{"path":"/reference/scenario_co2_calculations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate total CO2 exposure per mode and scenario — scenario_co2_calculations","text":"","code":"scenario_co2_calculations(dist)"},{"path":"/reference/scenario_co2_calculations.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate total CO2 exposure per mode and scenario — scenario_co2_calculations","text":"dist data frame population travel scenarios","code":""},{"path":"/reference/scenario_co2_calculations.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate total CO2 exposure per mode and scenario — scenario_co2_calculations","text":"total CO2 exposure per mode","code":""},{"path":"/reference/scenario_co2_calculations.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate total CO2 exposure per mode and scenario — scenario_co2_calculations","text":"function performs following steps: calculate emission factors mode dividing total emissions distances travelled calculate CO2 emissions mode scenario multiplying scenario distance times emission factors modes without assigned distance, use CO2 emissions VEHICLE_INVENTORY instead","code":""},{"path":"/reference/scenario_pm_calculations.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate total AP exposure per person — scenario_pm_calculations","title":"Calculate total AP exposure per person — scenario_pm_calculations","text":"Calculate total AP exposure per person based population personal travel","code":""},{"path":"/reference/scenario_pm_calculations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate total AP exposure per person — scenario_pm_calculations","text":"","code":"scenario_pm_calculations(dist, trip_scen_sets)"},{"path":"/reference/scenario_pm_calculations.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate total AP exposure per person — scenario_pm_calculations","text":"dist total distance travelled mode population scenarios trip_scen_sets trips data frame trips scenarios","code":""},{"path":"/reference/scenario_pm_calculations.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate total AP exposure per person — scenario_pm_calculations","text":"background PM concentration baseline scenarios total AP exposure per person synthetic population (baseline scenarios)","code":""},{"path":"/reference/scenario_pm_calculations.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate total AP exposure per person — scenario_pm_calculations","text":"function performs following steps: ventilation rates per mode defined - parameters fixed exposure factor rates activity defined - parameters fixed calculate pm concentration related transport calculate PM emission factors mode dividing total emissions distances travelled calculate PM emissions mode scenario multiplying scenario distance   emission factors modes without assigned distance, use PM emissions VEHICLE_INVENTORY instead calculate total PM concentrations scenario add ventilation exposure factors trip set stage mode add total scenario PM concentrations trip set add inhaled air total PM (micro grams) trip set define amount time per day spent leisure sedentary screen time,    non-discretionary time time - fixed add total time spent travelling participant trip set calculate sleep rest ventilation rates participant synthetic population (travel component),    calculate total air inhaled, total PM inhaled    total PM concentration inhaled scenario assign participants synthetic population without travel component,   baseline scenario PM concentrations join people without travel synthetic population","code":""},{"path":"/reference/set_injury_contingency.html","id":null,"dir":"Reference","previous_headings":"","what":"Injury summary statistics — set_injury_contingency","title":"Injury summary statistics — set_injury_contingency","text":"Creates summarised injury tables 'hit ' 'vehicle' fatality counts  casualty strike mode combination (age sex combination information exists)","code":""},{"path":"/reference/set_injury_contingency.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Injury summary statistics — set_injury_contingency","text":"","code":"set_injury_contingency(injuries)"},{"path":"/reference/set_injury_contingency.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Injury summary statistics — set_injury_contingency","text":"injuries data frame individual injury events","code":""},{"path":"/reference/set_injury_contingency.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Injury summary statistics — set_injury_contingency","text":"function performs following steps using individual fatality injury input file: data split WHW (hit ) matrix casualty strike mode given   NOV (vehicle) matrix strike mode set NOV ithim_load_data.R    vehicle involved accident. age gender information given, counts multiplied    proportion injuries relevant proportion population considered    model (e.g. 15 - 65 year olds) based GBD data Data aggregated casualty strike mode, age sex information exists Complete whw nov matrices containing casualty strike (age sex)   combinations created zero counts combinations fatalities list aggregated whw nov matrices set Global environment","code":""},{"path":"/reference/set_scenario_specific_variables.html","id":null,"dir":"Reference","previous_headings":"","what":"Set scenario specific variables - CURRENTLY NOT CALLED — set_scenario_specific_variables","title":"Set scenario specific variables - CURRENTLY NOT CALLED — set_scenario_specific_variables","text":"Set NSCEN, SCEN SCEN_SHORT_NAME","code":""},{"path":"/reference/set_scenario_specific_variables.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set scenario specific variables - CURRENTLY NOT CALLED — set_scenario_specific_variables","text":"","code":"set_scenario_specific_variables()"},{"path":"/reference/set_vehicle_inventory.html","id":null,"dir":"Reference","previous_headings":"","what":"Collate all vehicle information — set_vehicle_inventory","title":"Collate all vehicle information — set_vehicle_inventory","text":"Puts vehicle information one place including speeds emission factors. Writes global environment.","code":""},{"path":"/reference/set_vehicle_inventory.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Collate all vehicle information — set_vehicle_inventory","text":"","code":"set_vehicle_inventory()"},{"path":"/reference/set_vehicle_inventory.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Collate all vehicle information — set_vehicle_inventory","text":"function performs following operations: Based city specific (default) mode speeds, vehicle inventory initialised PM emissions added city specific (default) PM inventory big_truck mode added distance mode used air pollution modules mode added already exist travel survey (hence mode speeds) CO2 emissions added city specific (default) CO2 inventory car_driver exists, car_driver emissions set PM CO2 car emissions VEHICLE_INVENTORY set global variable","code":""},{"path":"/reference/total_mmet.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate total mMETs per person — total_mmet","title":"Calculate total mMETs per person — total_mmet","text":"Calculate total mMETs per person synthetic population based  non-travel PA active travel scenario","code":""},{"path":"/reference/total_mmet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate total mMETs per person — total_mmet","text":"","code":"total_mmet(trip_scen_sets)"},{"path":"/reference/total_mmet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate total mMETs per person — total_mmet","text":"trip_scen_sets data frame trips scenarios","code":""},{"path":"/reference/total_mmet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate total mMETs per person — total_mmet","text":"mmets - total mMETs per week per person scenario","code":""},{"path":"/reference/total_mmet.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate total mMETs per person — total_mmet","text":"function performs following steps: extract people trip set active travel (walk cycle)    stage mode (non-ghost trips ) calculate weekly time spent active travel scenario: scale non-travel mMET value people synthetic population       BACKGROUND_PA_SCALAR adjust biases PA data calculate total cycling walking mMET values relevant       person trip set scale week add active travel mMET non-travel mMET values       person synthetic population create one dataframe total MMET people synthetic   population scenarios","code":""},{"path":"/reference/walk_to_pt_and_combine_scen.html","id":null,"dir":"Reference","previous_headings":"","what":"Add walk to public transport stages — walk_to_pt_and_combine_scen","title":"Add walk to public transport stages — walk_to_pt_and_combine_scen","text":"Adds short walk stage public transport (PT) trip required.","code":""},{"path":"/reference/walk_to_pt_and_combine_scen.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add walk to public transport stages — walk_to_pt_and_combine_scen","text":"","code":"walk_to_pt_and_combine_scen(SYNTHETIC_TRIPS)"},{"path":"/reference/walk_to_pt_and_combine_scen.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add walk to public transport stages — walk_to_pt_and_combine_scen","text":"trip_set list data frames, trips scenarios","code":""},{"path":"/reference/walk_to_pt_and_combine_scen.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add walk to public transport stages — walk_to_pt_and_combine_scen","text":"data frame, trips scenarios","code":""},{"path":"/reference/walk_to_pt_and_combine_scen.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add walk to public transport stages — walk_to_pt_and_combine_scen","text":"function performs following steps: create list containing dataframes synthetic trips scenario ADD_WALK_TO_PT_TRIPS == T, .e additional 'walk pt' stages added: filter trips public transport stage mode divide public transport trips without 'walk pt' stage add 'walk pt' stage public transport trips without walking stage     (add_walk_trips.R) combine trips scenarios one dataframe scale stage distances durations calling scale_trip_distances.R function","code":""}]
