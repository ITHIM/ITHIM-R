<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Addition of ghost trips — add_ghost_trips • ithimr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Addition of ghost trips — add_ghost_trips"><meta property="og:description" content="Add trips that do not get assigned any physical activity component, 
often used as proxy for vehicle distances."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ithimr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Addition of ghost trips</h1>
    
    <div class="hidden name"><code>add_ghost_trips.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Add trips that do not get assigned any physical activity component, 
often used as proxy for vehicle distances.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_ghost_trips</span><span class="op">(</span></span>
<span>  <span class="va">raw_trip_set</span>,</span>
<span>  trip_mode <span class="op">=</span> <span class="st">"bus_driver"</span>,</span>
<span>  distance_ratio <span class="op">=</span> <span class="va">BUS_TO_PASSENGER_RATIO</span> <span class="op">*</span> <span class="va">DISTANCE_SCALAR_PT</span>,</span>
<span>  reference_mode <span class="op">=</span> <span class="st">"bus"</span>,</span>
<span>  prop_male <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  agerange_male <span class="op">=</span> <span class="st">"18, 65"</span>,</span>
<span>  agerange_female <span class="op">=</span> <span class="st">"18, 65"</span>,</span>
<span>  scenario <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>raw_trip_set</dt>
<dd><p>data frame of trips</p></dd>


<dt>trip_mode</dt>
<dd><p>which mode to add</p></dd>


<dt>distance_ratio</dt>
<dd><p>fraction of reference distance to use to calculate new mode distance</p></dd>


<dt>reference_mode</dt>
<dd><p>name of reference mode</p></dd>


<dt>prop_male</dt>
<dd><p>proportion of newly added mode that are assigned to males</p></dd>


<dt>agerange_male</dt>
<dd><p>age range of males associated with newly added mode</p></dd>


<dt>agerange_female</dt>
<dd><p>age range of female drivers associated with newly added mode</p></dd>


<dt>scenario</dt>
<dd><p>name of scenario for which mode is to be added</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>data frame of trips</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function creates trips based on distance relative to another (reference) mode, 
without altering the synthetic population. I.e. it adds trips that do not get assigned any physical 
activity component. This function can be used to add e.g. car_driver and bus_driver trips 
which are used as proxy for vehicle distances needed for the injury and the CO2 pathways. 
It can also used to add truck and commercial motorcycle trips that are not included in any travel surveys.
As needed for the injury pathway, these newly added trips are assigned as trips made by a males or 
females based on the proportion of males given as input parameter. The age ranges of males and females
taking those newly added trips can also be defined.</p>
<p>The new mode distance is equally split by the number of people times the number of trips per people to 
be added. This is used as the distance for new male trips. As the proportion of female trips tends to be
very low, the distance calculated for male trips is split by 10 and using a 10th of the distance
for male trips, 10 times as many female trips are added compared with the very low number of female
trips that would have been added had the same distance been used as for male trips. 
E.g. if the number of people to be added is 100 with 1 trip per person and 98<!-- % of  -->
those trips are made by males, then we add 98 male trips but 10 * 2 = 20 female trips 
with a 10th of the distance of male trips. This is to ensure a better representation of 
the demographics of female trips whilst keeping the number of newly added trips as 
small as possible to reduce the run time of the model.</p>
<p>The function performs the following steps:</p>
<p>- set up the number of people (with regards to males) and trips per per person to be added
- find the total distance of the reference mode
- find the age ranges for male and female trips
- find the number of male and female participants
- calculate the total distance of the new mode to be added based on the reference distance and
  find the speed of the new mode
- for male trips:
  - define the distance range for each male trip to be added, assume that each trip is of equal length
  - add new male trips sampling from the given age range (add_trips.R)
  - add age and distance categories plus scenario name
- repeat for female trips (assuming female trips are a 10th of the distance
  of male trips and adding proportionally 10 times as many female trips)</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rob Johnson, Ali Abbas.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

